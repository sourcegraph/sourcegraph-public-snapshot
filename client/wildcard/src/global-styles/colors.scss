// We need to import *both* SCSS variables (e.g., $oc-red-9) *and* CSS variables (e.g.,
// var(--oc-red-9). The SCSS variables are used for SCSS color math at build time, and the CSS
// variables are used at runtime.
@import 'open-color/open-color.scss';
@import 'open-color/open-color.css';

$blue: #0b70db;
$purple: #a305e1;
$red: $oc-red-9;
$orange: $oc-orange-7;
$yellow: $oc-yellow-7;
$green: $oc-green-7;
$teal: $oc-teal-7;
$cyan: #72dbe8;

// Exception that's used in $theme-colors.
$gray-02: #eff2f5;
// Exception that's used in [data-reach-dialog-overlay] background.
$gray-04: #dbe2f0;
// Exception that's used in $custom-select-indicator as SVG icon fill color.
$gray-06: #798baf;
// Exception that's used in $theme-colors and in --box-shadow variable.
$gray-08: #343a4d;
// Exception that's used in $theme-colors.
$gray-09: #262b38;

// light and dark colors used in `$theme-colors` -> `bg-*`
$gray-100: #f8f9fa;
$gray-800: #343a40;

// Core semantic base colors.
$primary: $blue;
$secondary: $gray-08;
$success: $green;
$info: $cyan;
$warning: $yellow;
$danger: $red;
$merged: $purple;
$light: $gray-100;
$dark: $gray-800;

// Added to bg- and text- utilities because it is commonly needed in our app.
$theme-colors: (
    'primary': $primary,
    'secondary': $secondary,
    'success': $success,
    'info': $info,
    'warning': $warning,
    'danger': $danger,
    'light': $light,
    'dark': $dark,
    'merged': $merged,
);

// Brand secondary colors.
// https://handbook.sourcegraph.com/departments/engineering/design/brand_guidelines/color/#secondary-colors
$violet-01: #eedfff;
$violet-02: #e8d1ff;
$violet-03: #ce9cff;
$violet-04: #a112ff;
$violet-05: #820dde;
$violet-06: #6112a3;
$violet-07: #270741;
$violet-08: #160425;
$violet-09: #5f3dc4;

:root {
    // Gray (blueish) root palette.
    --white: #ffffff;
    --gray-01: #f9fafb;
    --gray-02: #{$gray-02};
    --gray-03: #e6ebf2;
    --gray-04: #{$gray-04};
    --gray-05: #a6b6d9;
    --gray-06: #{$gray-06};
    --gray-07: #5e6e8c;
    --gray-08: #{$gray-08};
    --gray-09: #{$gray-09};
    --gray-10: #1d212f;
    --gray-11: #181b26;
    --gray-12: #14171f;
    --black: #0f111a;

    // Other root palette colors.
    --blue: #{$blue};
    --light-blue: #4393e7;
    --indigo: #0864c6;
    --purple: #{$purple};
    --pink: #d68cf3;
    --red: #{$red};
    --orange: #{$orange};
    --yellow: #{$yellow};
    --green: #{$green};
    --teal: #{$teal};
    --cyan: #{$cyan};

    // Brand secondary colors.
    --violet-01: #eedfff;
    --violet-02: #e8d1ff;
    --violet-03: #ce9cff;
    --violet-04: #a112ff;
    --violet-05: #820dde;
    --violet-06: #6112a3;
    --violet-07: #270741;
    --violet-08: #160425;
    --violet-09: #5f3dc4;

    // Logo colors
    --logo-orange: #ff5543;
    --logo-blue: #00cbec;
    --logo-purple: #a112ff;

    // Semantic colors.
    --primary: var(--blue);
    --primary-3: var(--indigo);
    --brand-secondary: var(--purple);
    --brand-secondary-2: var(--pink);
    --brand-secondary-3: #8900bf;
    --success: var(--green);
    --info: var(--cyan);
    --warning: var(--yellow);
    --danger: var(--red);
    --merged: #7048e8;
    --merged-2: #c6b6f6;
    --merged-3: #6b47d6;
    --light-text: var(--white);
    --light-text-disabled: rgba(255, 255, 255, 0.6);
    --dark-text: var(--gray-08);
    --line-number-color: var(--gray-06);
    --header-icon-color: var(--gray-05);
    --tooltip-bg: var(--gray-08);
    --text-disabled: var(--gray-06);

    // Color for the <mark> element and highlighted/hovered tokens.
    --mark-bg-dark: rgba(217, 72, 15, 0.5);
    --mark-bg-light: rgba(255, 192, 120, 0.5);
}

.theme-light {
    // Affects default browser styles
    color-scheme: light;

    --primary-2: #a3d0ff;
    --primary-4: #e1f0ff;
    --secondary: var(--gray-04);
    --secondary-2: #eef1f7;
    --secondary-3: #c6cfe1;
    --secondary-4: #f1f4f9;
    --success-2: #afe0b8;
    --success-3: #319e44;
    --success-4: #ebfaee;
    --info-2: #a8dbe2;
    --info-3: #0bb3ca;
    --info-4: #eafafc;
    --warning-2: #fbd999;
    --warning-3: #e09200;
    --warning-4: #fff7e1;
    --danger-2: #e9aaaa;
    --danger-3: #b52626;
    --danger-4: #fbeaea;
    --danger-text: var(--oc-red-8);
    --body-color: var(--gray-08);
    --body-bg: var(--gray-01);
    --color-bg-1: var(--white);
    --color-bg-2: var(--gray-03);
    --color-bg-3: var(--gray-04);
    --mark-bg: #f8e688;
    --merged-4: #eee9fd;
    --text-body: var(--gray-08);
    --text-muted: var(--gray-07);
    --text-muted-highlighted: #566880; // --text-muted with higher contrast when shown on a --mark-bg background
    --text-title: var(--gray-11);
    --link-color: var(--primary);
    --link-color-2: #0766cc;
    --link-active-color: #0c7bf0;
    --link-hover-color: #0c7bf0;
    --border-color: var(--gray-03);
    --border-color-2: var(--gray-04);
    --border-active-color: var(--primary);
    --border-primary-color: #0f59aa; // = dark variant of primary-2
    // Start query highlighting
    --search-query-text-color: var(--gray-12);
    --search-filter-keyword-color: var(--primary);
    --search-filter-separator-color: var(--oc-gray-7);
    --search-path-separator-color: var(--oc-gray-7);
    --search-keyword-color: var(--purple);
    --search-regexp-meta-assertion-color: var(--oc-red-9);
    --search-regexp-meta-delimited-color: var(--oc-red-9);
    --search-regexp-meta-lazy-quantifier-color: var(--oc-red-9);
    --search-regexp-meta-escaped-character-color: var(--oc-red-9);
    --search-regexp-meta-character-set-color: var(--purple);
    --search-regexp-meta-character-class-color: var(--purple);
    --search-regexp-meta-character-class-member-color: var(--search-query-text-color);
    --search-regexp-meta-character-class-range-color: var(--search-query-text-color);
    --search-regexp-meta-character-class-range-hyphen-color: var(--search-query-text-color);
    --search-regexp-meta-range-quantifier-color: var(--oc-cyan-7);
    --search-regexp-meta-alternative-color: var(--oc-cyan-7);
    --search-revision-separator-color: var(--oc-orange-9);
    --search-revision-include-glob-marker-color: var(--oc-red-9);
    --search-revision-exclude-glob-marker-color: var(--oc-red-9);
    --search-revision-commit-hash-color: var(--search-query-text-color);
    --search-revision-label-color: var(--search-query-text-color);
    --search-revision-reference-path-color: var(--search-query-text-color);
    --search-revision-wildcard-color: var(--oc-cyan-7);
    --search-predicate-name-access-color: var(--search-keyword-color);
    --search-predicate-dot-color: var(--search-query-text-color);
    --search-predicate-parenthesis-color: var(--oc-orange-9);
    --search-structural-hole-color: var(--oc-red-9);
    --search-structural-regexp-hole-color: var(--oc-red-9);
    --search-structural-variable-color: var(--search-query-text-color);
    --search-structural-regexp-separator-color: var(--oc-orange-9);
    // End query highlighting
    --infobar-warning-color: var(--oc-red-8);
    --icon-color: var(--gray-06);
    --icon-muted: var(--gray-05);
    --code-bg: var(--white);
    --intel-bg: var(--white);
    --subtle-bg: var(--gray-02);
    --subtle-bg-2: #{rgba($gray-02, 0.5)};
    --search-input-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
    --code-line-highlight-color: var(--color-bg-2);
    --diff-add-bg: #eeffec;
    --diff-remove-bg: #ffecec;
    --diff-add-fg: #93dc8b;
    --diff-remove-fg: #f98989;
    --code-selection-bg: var(--gray-03);
    --code-selection-bg-2: #add6ff;
    --sourcegraph-logo-text-color: #000000;
    --marketing-gradient: linear-gradient(90.64deg, #e4d3fc 3.11%, #d7f0fd 83.64%);
    --marketing-gradient-25: linear-gradient(
        90.64deg,
        rgba(228, 211, 252, 0.25) 3.11%,
        rgba(215, 240, 253, 0.25) 83.64%
    );
    --modal-bg: #{rgba($gray-04, 0.5)};
    --sidebar-bg: var(--color-bg-1);
    --sidebar-border-color: var(--border-color-2);
    // Chroma rules, for rendered markdown blocks
    --chroma-error-fg: #a61717;
    --chroma-error-bg: #e3d2d2;
    --chroma-line-link-fg: inherit;
    --chroma-line-highlight-bg: #e5e5e5;
    --chroma-line-numbers-table-fg: #7f7f7f;
    --chroma-line-numbers-fg: #7f7f7f;
    --chroma-keyword-fg: #000000;
    --chroma-keyword-constant-fg: #000000;
    --chroma-keyword-declaration-fg: #000000;
    --chroma-keyword-namespace-fg: #000000;
    --chroma-keyword-pseudo-fg: #000000;
    --chroma-keyword-reserved-fg: #000000;
    --chroma-keyword-type-fg: #445588;
    --chroma-name-attribute-fg: #008080;
    --chroma-name-builtin-fg: #0086b3;
    --chroma-name-builtin-pseudo-fg: #999999;
    --chroma-name-class-fg: #445588;
    --chroma-name-constant-fg: #008080;
    --chroma-name-decorator-fg: #3c5d5d;
    --chroma-name-entity-fg: #800080;
    --chroma-name-exception-fg: #990000;
    --chroma-name-function-fg: #990000;
    --chroma-name-label-fg: #990000;
    --chroma-name-namespace-fg: #555555;
    --chroma-name-tag-fg: #000080;
    --chroma-name-variable-fg: #008080;
    --chroma-name-variable-class-fg: #008080;
    --chroma-name-variable-global-fg: #008080;
    --chroma-name-variable-instance-fg: #008080;
    --chroma-literal-string-fg: #dd1144;
    --chroma-literal-string-affix-fg: #dd1144;
    --chroma-literal-string-backtick-fg: #dd1144;
    --chroma-literal-string-char-fg: #dd1144;
    --chroma-literal-string-delimiter-fg: #dd1144;
    --chroma-literal-string-doc-fg: #dd1144;
    --chroma-literal-string-double-fg: #dd1144;
    --chroma-literal-string-escape-fg: #dd1144;
    --chroma-literal-string-heredoc-fg: #dd1144;
    --chroma-literal-string-interpol-fg: #dd1144;
    --chroma-literal-string-other-fg: #dd1144;
    --chroma-literal-string-regex-fg: #009926;
    --chroma-literal-string-single-fg: #dd1144;
    --chroma-literal-string-symbol-fg: #990073;
    --chroma-literal-number-fg: #009999;
    --chroma-literal-number-bin-fg: #009999;
    --chroma-literal-number-float-fg: #009999;
    --chroma-literal-number-hex-fg: #009999;
    --chroma-literal-number-integer-fg: #009999;
    --chroma-literal-number-integer-long-fg: #009999;
    --chroma-literal-number-oct-fg: #009999;
    --chroma-operator-fg: #000000;
    --chroma-operator-word-fg: #000000;
    --chroma-comment-fg: #999988;
    --chroma-comment-hashbang-fg: #999988;
    --chroma-comment-multiline-fg: #999988;
    --chroma-comment-single-fg: #999988;
    --chroma-comment-special-fg: #999999;
    --chroma-comment-preproc-fg: #999999;
    --chroma-comment-preproc-file-fg: #999999;
    --chroma-generic-deleted-fg: #000000;
    --chroma-generic-deleted-bg: #ffdddd;
    --chroma-generic-emph-fg: #000000;
    --chroma-generic-error-fg: #aa0000;
    --chroma-generic-heading-fg: #999999;
    --chroma-generic-inserted-fg: #000000;
    --chroma-generic-inserted-bg: #ddffdd;
    --chroma-generic-output-fg: #888888;
    --chroma-generic-prompt-fg: #555555;
    --chroma-generic-subheading-fg: #aaaaaa;
    --chroma-generic-traceback-fg: #aa0000;
    --chroma-text-whitespace-fg: #bbbbbb;

    // Header colors
    --result-header-bg: #f5f8fa;

    // Search input "chip" colors
    // Transparency needs to be added to make the text selection marker visible
    --search-input-token-pattern: #{rgba($gray-04, 0.6)};
    --search-input-token-filter: #{rgba($oc-blue-1, 0.6)};
    --search-input-token-keyword: #{rgba($violet-01, 0.6)};
}

.theme-dark {
    // Affects default browser styles.
    color-scheme: dark;

    --primary-2: #0f59aa;
    --primary-4: #03284f;
    --secondary: var(--gray-08);
    --secondary-2: #242936;
    --secondary-3: #1f232e;
    --secondary-4: #1e222f;
    --success-2: #156724;
    --success-3: #237332;
    --success-4: #054410;
    --info-2: #05454e;
    --info-3: #005766;
    --info-4: #025762;
    --warning-2: #815504;
    --warning-3: #9c6500;
    --warning-4: #3d2904;
    --danger-2: #6b1515;
    --danger-3: #801b1b;
    --danger-4: #3d0a0a;
    --danger-text: var(--oc-red-6);
    --body-color: var(--gray-04);
    --body-bg: var(--gray-12);
    --color-bg-1: var(--gray-11);
    --color-bg-2: var(--gray-10);
    --color-bg-3: var(--gray-08);
    --mark-bg: #7a341e;
    --merged-4: #1f0a5c;
    --text-body: var(--gray-05);
    --text-muted: var(--gray-06);
    --text-muted-highlighted: #a9b9da; // --text-muted with higher contrast when shown on a --mark-bg background
    --text-title: var(--gray-02);
    --link-color: var(--light-blue);
    --link-color-2: #70b0f3;
    --link-active-color: #489ffa;
    --link-hover-color: #489ffa;
    --border-color: var(--gray-09);
    --border-color-2: var(--gray-08);
    --border-active-color: var(--light-blue);
    --border-primary-color: #0f59aa; // = dark variant of primary-2
    // Start query highlighting
    --search-query-text-color: var(--gray-04);
    --search-filter-keyword-color: var(--light-blue);
    --search-filter-separator-color: var(--oc-gray-5);
    --search-path-separator-color: var(--oc-gray-5);
    --search-keyword-color: var(--pink);
    --search-regexp-meta-assertion-color: var(--oc-red-5);
    --search-regexp-meta-delimited-color: var(--oc-red-5);
    --search-regexp-meta-lazy-quantifier-color: var(--oc-red-5);
    --search-regexp-meta-escaped-character-color: var(--oc-red-3);
    --search-regexp-meta-character-set-color: var(--pink);
    --search-regexp-meta-character-class-color: var(--oc-grape-4);
    --search-regexp-meta-character-class-member-color: var(--search-query-text-color);
    --search-regexp-meta-character-class-range-color: var(--search-query-text-color);
    --search-regexp-meta-character-class-range-hyphen-color: var(--search-query-text-color);
    --search-regexp-meta-range-quantifier-color: var(--oc-cyan-4);
    --search-regexp-meta-alternative-color: var(--oc-cyan-4);
    --search-revision-separator-color: var(--oc-orange-4);
    --search-revision-include-glob-marker-color: var(--oc-red-5);
    --search-revision-exclude-glob-marker-color: var(--oc-red-5);
    --search-revision-commit-hash-color: var(--search-query-text-color);
    --search-revision-label-color: var(--search-query-text-color);
    --search-revision-reference-path-color: var(--search-query-text-color);
    --search-revision-wildcard-color: var(--oc-cyan-4);
    --search-predicate-name-access-color: var(--search-keyword-color);
    --search-predicate-dot-color: var(--search-query-text-color);
    --search-predicate-parenthesis-color: var(--oc-orange-4);
    --search-structural-hole-color: var(--oc-red-5);
    --search-structural-regexp-hole-color: var(--oc-red-5);
    --search-structural-variable-color: var(--search-query-text-color);
    --search-structural-regexp-separator-color: var(--oc-orange-4);
    // End query highlighting
    --infobar-warning-color: #f05151;
    --icon-color: var(--gray-05);
    --icon-muted: var(--gray-07);
    --code-bg: var(--gray-10);
    --intel-bg: var(--gray-12);
    --subtle-bg: var(--gray-09);
    --subtle-bg-2: #{rgba($gray-09, 0.2)};
    --search-input-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
    --code-line-highlight-color: var(--body-bg);
    --diff-add-bg: #224035;
    --diff-remove-bg: #3e1d1d;
    --diff-add-fg: #43866e;
    --diff-remove-fg: #904747;
    --code-selection-bg: var(--gray-08);
    --code-selection-bg-2: #264f78;
    --sourcegraph-logo-text-color: var(--white);
    --marketing-gradient: linear-gradient(90.64deg, rgba(108, 8, 223, 0.5) 3.11%, rgba(0, 165, 213, 0.5) 83.64%);
    --marketing-gradient-25: linear-gradient(90.64deg, rgba(108, 8, 223, 0.25) 3.11%, rgba(0, 165, 213, 0.25) 83.64%);
    --modal-bg: #{rgba($gray-08, 0.5)};
    --sidebar-bg: var(--black);
    --sidebar-border-color: var(--color-bg-2);
    --collapse-results-color: var(--gray-05);
    // Chroma rules, for rendered markdown blocks
    --chroma-error-fg: #f85149;
    --chroma-line-link-fg: inherit;
    --chroma-line-highlight-fg: #6e7681;
    --chroma-line-numbers-table-fg: #64686c;
    --chroma-line-numbers-fg: #6e7681;
    --chroma-keyword-fg: #ff7b72;
    --chroma-keyword-constant-fg: #79c0ff;
    --chroma-keyword-declaration-fg: #ff7b72;
    --chroma-keyword-namespace-fg: #ff7b72;
    --chroma-keyword-pseudo-fg: #79c0ff;
    --chroma-keyword-reserved-fg: #ff7b72;
    --chroma-keyword-type-fg: #ff7b72;
    --chroma-name-class-fg: #f0883e;
    --chroma-name-constant-fg: #79c0ff;
    --chroma-name-decorator-fg: #d2a8ff;
    --chroma-name-entity-fg: #ffa657;
    --chroma-name-exception-fg: #f0883e;
    --chroma-name-function-fg: #d2a8ff;
    --chroma-name-label-fg: #79c0ff;
    --chroma-name-namespace-fg: #ff7b72;
    --chroma-name-property-fg: #79c0ff;
    --chroma-name-tag-fg: #7ee787;
    --chroma-name-variable-fg: #79c0ff;
    --chroma-literal-fg: #a5d6ff;
    --chroma-literal-date-fg: #79c0ff;
    --chroma-literal-string-fg: #a5d6ff;
    --chroma-literal-string-affix-fg: #79c0ff;
    --chroma-literal-string-backtick-fg: #a5d6ff;
    --chroma-literal-string-char-fg: #a5d6ff;
    --chroma-literal-string-delimiter-fg: #79c0ff;
    --chroma-literal-string-doc-fg: #a5d6ff;
    --chroma-literal-string-double-fg: #a5d6ff;
    --chroma-literal-string-escape-fg: #79c0ff;
    --chroma-literal-string-heredoc-fg: #79c0ff;
    --chroma-literal-string-interpol-fg: #a5d6ff;
    --chroma-literal-string-other-fg: #a5d6ff;
    --chroma-literal-string-regex-fg: #79c0ff;
    --chroma-literal-string-single-fg: #a5d6ff;
    --chroma-literal-string-symbol-fg: #a5d6ff;
    --chroma-literal-number-fg: #a5d6ff;
    --chroma-literal-number-bin-fg: #a5d6ff;
    --chroma-literal-number-float-fg: #a5d6ff;
    --chroma-literal-number-hex-fg: #a5d6ff;
    --chroma-literal-number-integer-fg: #a5d6ff;
    --chroma-literal-number-integer-long-fg: #a5d6ff;
    --chroma-literal-number-oct-fg: #a5d6ff;
    --chroma-operator-fg: #ff7b72;
    --chroma-operator-word-fg: #ff7b72;
    --chroma-comment-fg: #8b949e;
    --chroma-comment-hashbang-fg: #8b949e;
    --chroma-comment-multiline-fg: #8b949e;
    --chroma-comment-single-fg: #8b949e;
    --chroma-comment-special-fg: #8b949e;
    --chroma-comment-preproc-fg: #8b949e;
    --chroma-comment-preproc-file-fg: #8b949e;
    --chroma-generic-deleted-fg: #ffa198;
    --chroma-generic-deleted-bg: #490202;
    --chroma-generic-error-fg: #ffa198;
    --chroma-generic-heading-fg: #79c0ff;
    --chroma-generic-inserted-fg: #56d364;
    --chroma-generic-inserted-bg: #0f5323;
    --chroma-generic-output-fg: #8b949e;
    --chroma-generic-prompt-fg: #8b949e;
    --chroma-generic-subheading-fg: #79c0ff;
    --chroma-generic-traceback-fg: #ff7b72;
    --chroma-text-whitespace-fg: #6e7681;

    // Header colors
    --result-header-bg: #22283b;

    // Search input "chip" colors
    // Transparency needs to be added to make the text selection marker visible
    --search-input-token-pattern: #{rgba($gray-08, 0.8)};
    --search-input-token-filter: #{rgba($oc-blue-9, 0.4)};
    --search-input-token-keyword: #{rgba($violet-05, 0.6)};
}

// Additional colors global colors.
.theme-dark,
.theme-light {
    --box-shadow: 0 0.25rem 0.5rem #{rgba($gray-08, 0.07)};
    --focus-box-shadow: 0 0 0 0.125rem var(--primary-2);
    --btn-link-disabled-color: var(--primary-2);
    --vulnerability-announcement: linear-gradient(to right, #8f3fce, #b80887);
    --text-muted-transparent: #{rgba($gray-06, 0.3)};
    --search-box-focus-box-shadow: 0 0 0 2px rgba(28, 126, 214, 0.25);
}

// Syntax highlighting changes for WCAG 2.1 contrast compliance (currently behind feature flag)
// https://github.com/sourcegraph/sourcegraph/issues/36251
.theme-light .theme-contrast-compliant-syntax-highlighting {
    --line-number-color: var(--gray-07);
}
.theme-dark .theme-contrast-compliant-syntax-highlighting {
    --line-number-color: var(--gray-06);
}
