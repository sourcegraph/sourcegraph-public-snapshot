{"version":3,"file":"editorconfig.js","sourceRoot":"","sources":["editorconfig.ts"],"names":[],"mappings":";AAEA,IAAY,YAAY,WAAM,cAAc,CAAC,CAAA;AAI7C,IAAI,kBAAkB,GAAG,KAAK,CAAC;AAE/B,+BAA8C,QAAgB,EAAE,IAAa,EAAE,cAAqC;IAEhH,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACtD,OAAO,CAAC,GAAG,CAAC,+CAA+C,CAAC,CAAC;QAC7D,kBAAkB,GAAG,IAAI,CAAC;IAC9B,CAAC;IAED,MAAM,CAAC,YAAY;SACd,KAAK,CAAC,QAAQ,CAAC;SACf,IAAI,CAAC,UAAA,MAAM;QACR,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACnC,MAAM,CAAC,cAAc,CAAC;QAC1B,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YACf,OAAO,CAAC,GAAG,CAAC,kBAAkB,GAAG,QAAQ,GAAG,QAAQ,GAAG,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;QACnG,CAAC;QAED,EAAE,CAAC,CAAC,MAAM,CAAC,YAAY,KAAK,KAAK,CAAC,CAAC,CAAC;YAChC,cAAc,CAAC,mBAAmB,GAAG,KAAK,CAAC;QAI/C,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,MAAM,CAAC,WAAW,KAAK,QAAQ,CAAC,CAAC,CAAC;YAChD,cAAc,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAC1C,cAAc,CAAC,UAAU,GAAG,MAAM,CAAC,WAAW,CAAC;QACnD,CAAC;QACD,EAAE,CAAC,CAAC,MAAM,CAAC,WAAW,KAAK,IAAI,CAAC,CAAC,CAAC;YAC9B,cAAc,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC3C,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,WAAW,KAAK,IAAI,CAAC,CAAC,CAAC;YACrC,cAAc,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC3C,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,WAAW,KAAK,MAAM,CAAC,CAAC,CAAC;YACvC,cAAc,CAAC,gBAAgB,GAAG,MAAM,CAAC;QAC7C,CAAC;QAED,MAAM,CAAC,cAAc,CAAC;IAC1B,CAAC,CAAC,CAAC;AACX,CAAC;AApCD;uCAoCC,CAAA;AAGD,qBAA4B,QAAgB,EAAE,aAAqB,EAAE,IAAa,EAAE,eAAsC;IAEtH,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACtD,OAAO,CAAC,GAAG,CAAC,+CAA+C,CAAC,CAAC;QAC7D,kBAAkB,GAAG,IAAI,CAAC;IAC9B,CAAC;IAED,MAAM,CAAC,YAAY;SACd,KAAK,CAAC,QAAQ,CAAC;SACf,IAAI,CAAC,UAAA,MAAM;QACR,EAAE,CAAC,CAAC,MAAM,CAAC,oBAAoB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YAC5D,aAAa,IAAI,IAAI,CAAC;QAC1B,CAAC;QACD,MAAM,CAAC,aAAa,CAAC;IACzB,CAAC,CAAC,CAAC;AACX,CAAC;AAfe,mBAAW,cAe1B,CAAA","sourcesContent":["import * as ts from \"typescript\";\n\nimport * as editorconfig from \"editorconfig\";\n\nimport { Options } from \"../\";\n\nlet emitBaseDirWarning = false;\n\nexport default function makeFormatCodeOptions(fileName: string, opts: Options, formatSettings: ts.FormatCodeSettings): Promise<ts.FormatCodeSettings> {\n\n    if (opts.verbose && opts.baseDir && !emitBaseDirWarning) {\n        console.log(\"editorconfig is not supported baseDir options\");\n        emitBaseDirWarning = true;\n    }\n\n    return editorconfig\n        .parse(fileName)\n        .then(config => {\n            if (Object.keys(config).length === 0) {\n                return formatSettings;\n            }\n            if (opts.verbose) {\n                console.log(\"editorconfig: \\n\" + \"file: \" + fileName + \"\\n\" + JSON.stringify(config, null, 2));\n            }\n\n            if (config.indent_style === \"tab\") {\n                formatSettings.convertTabsToSpaces = false;\n                // if (typeof config.tab_width === \"number\") {\n                // \toptions.TabSize = config.tab_width;\n                // }\n            } else if (typeof config.indent_size === \"number\") {\n                formatSettings.convertTabsToSpaces = true;\n                formatSettings.indentSize = config.indent_size;\n            }\n            if (config.end_of_line === \"lf\") {\n                formatSettings.newLineCharacter = \"\\n\";\n            } else if (config.end_of_line === \"cr\") {\n                formatSettings.newLineCharacter = \"\\r\";\n            } else if (config.end_of_line === \"crlf\") {\n                formatSettings.newLineCharacter = \"\\r\\n\";\n            }\n\n            return formatSettings;\n        });\n}\n\n\nexport function postProcess(fileName: string, formattedCode: string, opts: Options, _formatSettings: ts.FormatCodeSettings): Promise<string> {\n\n    if (opts.verbose && opts.baseDir && !emitBaseDirWarning) {\n        console.log(\"editorconfig is not supported baseDir options\");\n        emitBaseDirWarning = true;\n    }\n\n    return editorconfig\n        .parse(fileName)\n        .then(config => {\n            if (config.insert_final_newline && !/\\n$/.test(formattedCode)) {\n                formattedCode += \"\\n\";\n            }\n            return formattedCode;\n        });\n}\n"]}