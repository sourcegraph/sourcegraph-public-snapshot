{"version":3,"sources":["vs/languages/php/common/fake","vs/languages/php/common/php.js","vs/languages/php/common/file:/home/aeschli/workspaces/vscode/src/vs/languages/php/common/php.ts"],"names":["__m","__M","deps","result","i","len","length","__extends","this","d","b","__","constructor","p","hasOwnProperty","prototype","Object","create","__decorate","decorators","target","key","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","define","require","exports","objects","Modes","abstractMode_1","abstractState_1","modeService_1","languageConfigurationRegistry_1","tokenizationSupport_1","suggestSupport_1","editorWorkerService_1","configuration_1","compatWorkerService_1","brackets","bracketsSource","tokenType","open","close","MAP","bracket","stringIsBracket","text","tokenTypeFromString","delimiters","separators","whitespace","isKeyword","createKeywordMatcher","isCompileTimeConstant","isPreDefinedVariable","isDelimiter","character","indexOf","isVariable","PHPState","_super","mode","name","parent","whitespaceTokenType","call","equals","other","AbstractState","safeEquals","tokenize","stream","setTokenRules","skipWhitespace","type","stateTokenize","Error","PHPString","delimiter","isAtBeginning","makeClone","getMode","safeClone","readChars","eos","next","goBack","nextState","PHPNumber","firstDigit","base","isDecimal","isExponent","peek","toLowerCase","isDigit","PHPLineComment","PHPDocComment","token","peekWhitespace","PHPStatement","advanceIfString","nextToken","toString","peekToken","PHPPlain","advanceIfStringCaseInsensitive","PHPEnterHTMLState","PHPMode","descriptor","modeService","configurationService","editorWorkerService","compatWorkerService","id","tokenizationSupport","TokenizationSupport","LanguageConfigurationRegistry","register","getId","LANG_CONFIG","SuggestRegistry","TextualSuggestSupport","getInitialState","htmlMode","htmlState","setStateData","enterNestedMode","state","getNestedModeInitialState","myState","missingModePromise","getLeavingNestedModeData","line","match","exec","nestedModeBuffer","substring","index","bufferAfterNestedMode","stateAfterNestedMode","onReturningFromNestedMode","myStateAfterNestedMode","lastNestedModeState","wordPattern","createWordRegExp","comments","lineComment","blockComment","autoClosingPairs","notIn","IModeService","IConfigurationService","IEditorWorkerService","ICompatWorkerService","CompatMode"],"mappings":"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","file":"vs/languages/php/common/php.js","sourcesContent":["}).call(this);","/*!-----------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.5.3(793ede49d53dba79d39e52205f16321278f5183c)\n * Released under the MIT license\n * https://github.com/Microsoft/vscode/blob/master/LICENSE.txt\n *-----------------------------------------------------------*/\n\n(function() {\nvar __m = [\"vs/editor/common/services/modeService\",\"vs/languages/php/common/php\",\"exports\",\"vs/base/common/objects\",\"vs/editor/common/modes\",\"vs/editor/common/modes/abstractMode\",\"vs/editor/common/modes/abstractState\",\"require\",\"vs/editor/common/modes/languageConfigurationRegistry\",\"vs/editor/common/modes/supports/tokenizationSupport\",\"vs/editor/common/modes/supports/suggestSupport\",\"vs/editor/common/services/editorWorkerService\",\"vs/platform/configuration/common/configuration\",\"vs/editor/common/services/compatWorkerService\"];\nvar __M = function(deps) {\n  var result = [];\n  for (var i = 0, len = deps.length; i < len; i++) {\n    result[i] = __m[deps[i]];\n  }\n  return result;\n};\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\ndefine(__m[1], __M([7,2,3,4,5,6,0,8,9,10,11,12,13]), function (require, exports, objects, Modes, abstractMode_1, abstractState_1, modeService_1, languageConfigurationRegistry_1, tokenizationSupport_1, suggestSupport_1, editorWorkerService_1, configuration_1, compatWorkerService_1) {\n    /*---------------------------------------------------------------------------------------------\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\n     *--------------------------------------------------------------------------------------------*/\n    'use strict';\n    var brackets = (function () {\n        var bracketsSource = [\n            { tokenType: 'delimiter.bracket.php', open: '{', close: '}' },\n            { tokenType: 'delimiter.array.php', open: '[', close: ']' },\n            { tokenType: 'delimiter.parenthesis.php', open: '(', close: ')' }\n        ];\n        var MAP = Object.create(null);\n        for (var i = 0; i < bracketsSource.length; i++) {\n            var bracket = bracketsSource[i];\n            MAP[bracket.open] = {\n                tokenType: bracket.tokenType\n            };\n            MAP[bracket.close] = {\n                tokenType: bracket.tokenType\n            };\n        }\n        return {\n            stringIsBracket: function (text) {\n                return !!MAP[text];\n            },\n            tokenTypeFromString: function (text) {\n                return MAP[text].tokenType;\n            }\n        };\n    })();\n    var delimiters = '+-*%&|^~!=<>(){}[]/?;:.,@';\n    var separators = '+-*/%&|^~!=<>(){}[]\"\\'\\\\/?;:.,#';\n    var whitespace = '\\t ';\n    var isKeyword = objects.createKeywordMatcher([\n        'abstract', 'and', 'array', 'as', 'break',\n        'callable', 'case', 'catch', 'cfunction', 'class', 'clone',\n        'const', 'continue', 'declare', 'default', 'do',\n        'else', 'elseif', 'enddeclare', 'endfor', 'endforeach',\n        'endif', 'endswitch', 'endwhile', 'extends', 'false', 'final',\n        'for', 'foreach', 'function', 'global', 'goto',\n        'if', 'implements', 'interface', 'instanceof', 'insteadof',\n        'namespace', 'new', 'null', 'object', 'old_function', 'or', 'private',\n        'protected', 'public', 'resource', 'static', 'switch', 'throw', 'trait',\n        'try', 'true', 'use', 'var', 'while', 'xor',\n        'die', 'echo', 'empty', 'exit', 'eval',\n        'include', 'include_once', 'isset', 'list', 'require',\n        'require_once', 'return', 'print', 'unset', 'yield',\n        '__construct'\n    ]);\n    var isCompileTimeConstant = objects.createKeywordMatcher([\n        '__CLASS__',\n        '__DIR__',\n        '__FILE__',\n        '__LINE__',\n        '__NAMESPACE__',\n        '__METHOD__',\n        '__FUNCTION__',\n        '__TRAIT__'\n    ]);\n    var isPreDefinedVariable = objects.createKeywordMatcher([\n        '$GLOBALS',\n        '$_SERVER',\n        '$_GET',\n        '$_POST',\n        '$_FILES',\n        '$_REQUEST',\n        '$_SESSION',\n        '$_ENV',\n        '$_COOKIE',\n        '$php_errormsg',\n        '$HTTP_RAW_POST_DATA',\n        '$http_response_header',\n        '$argc',\n        '$argv'\n    ]);\n    var isDelimiter = function (character) {\n        return delimiters.indexOf(character) > -1;\n    };\n    var isVariable = function (character) {\n        return (character[0] === '$');\n    };\n    var PHPState = (function (_super) {\n        __extends(PHPState, _super);\n        function PHPState(mode, name, parent, whitespaceTokenType) {\n            if (whitespaceTokenType === void 0) { whitespaceTokenType = ''; }\n            _super.call(this, mode);\n            this.name = name;\n            this.parent = parent;\n            this.whitespaceTokenType = whitespaceTokenType;\n        }\n        PHPState.prototype.equals = function (other) {\n            if (other instanceof PHPState) {\n                return (_super.prototype.equals.call(this, other) &&\n                    this.name === other.name &&\n                    this.whitespaceTokenType === other.whitespaceTokenType &&\n                    abstractState_1.AbstractState.safeEquals(this.parent, other.parent));\n            }\n            return false;\n        };\n        PHPState.prototype.tokenize = function (stream) {\n            stream.setTokenRules(separators, whitespace);\n            if (stream.skipWhitespace().length > 0) {\n                return { type: this.whitespaceTokenType };\n            }\n            return this.stateTokenize(stream);\n        };\n        PHPState.prototype.stateTokenize = function (stream) {\n            throw new Error('To be implemented');\n        };\n        return PHPState;\n    }(abstractState_1.AbstractState));\n    exports.PHPState = PHPState;\n    var PHPString = (function (_super) {\n        __extends(PHPString, _super);\n        function PHPString(mode, parent, delimiter, isAtBeginning) {\n            if (isAtBeginning === void 0) { isAtBeginning = true; }\n            _super.call(this, mode, 'string', parent, 'string.php');\n            this.delimiter = delimiter;\n            this.isAtBeginning = isAtBeginning;\n        }\n        PHPString.prototype.makeClone = function () {\n            return new PHPString(this.getMode(), abstractState_1.AbstractState.safeClone(this.parent), this.delimiter, this.isAtBeginning);\n        };\n        PHPString.prototype.equals = function (other) {\n            if (other instanceof PHPString) {\n                return (_super.prototype.equals.call(this, other) &&\n                    this.delimiter === other.delimiter &&\n                    this.isAtBeginning === other.isAtBeginning);\n            }\n            return false;\n        };\n        PHPString.prototype.tokenize = function (stream) {\n            var readChars = this.isAtBeginning ? 1 : 0;\n            this.isAtBeginning = false;\n            while (!stream.eos()) {\n                var c = stream.next();\n                if (c === '\\\\') {\n                    if (readChars === 0) {\n                        if (stream.eos()) {\n                            return { type: 'string.php', nextState: this.parent };\n                        }\n                        else {\n                            stream.next();\n                        }\n                    }\n                    else {\n                        stream.goBack(1);\n                        return { type: 'string.php' };\n                    }\n                }\n                else if (c === this.delimiter) {\n                    return { type: 'string.php', nextState: this.parent };\n                }\n                readChars += 1;\n            }\n            return { type: 'string.php' };\n        };\n        return PHPString;\n    }(PHPState));\n    exports.PHPString = PHPString;\n    var PHPNumber = (function (_super) {\n        __extends(PHPNumber, _super);\n        function PHPNumber(mode, parent, firstDigit) {\n            _super.call(this, mode, 'number', parent);\n            this.firstDigit = firstDigit;\n        }\n        PHPNumber.prototype.makeClone = function () {\n            return new PHPNumber(this.getMode(), abstractState_1.AbstractState.safeClone(this.parent), this.firstDigit);\n        };\n        PHPNumber.prototype.equals = function (other) {\n            if (other instanceof PHPNumber) {\n                return (_super.prototype.equals.call(this, other) &&\n                    this.firstDigit === other.firstDigit);\n            }\n            return false;\n        };\n        PHPNumber.prototype.tokenize = function (stream) {\n            var character = this.firstDigit;\n            var base = 10, isDecimal = false, isExponent = false;\n            if (character === '0' && !stream.eos()) {\n                character = stream.peek();\n                if (character.toLowerCase() === 'x') {\n                    base = 16;\n                }\n                else if (character.toLowerCase() === 'b') {\n                    base = 2;\n                }\n                else if (character === '.') {\n                    base = 10;\n                }\n                else if (abstractMode_1.isDigit(character, 8)) {\n                    base = 8;\n                }\n                else {\n                    return { type: 'number.php', nextState: this.parent };\n                }\n                stream.next();\n            }\n            while (!stream.eos()) {\n                character = stream.peek();\n                if (abstractMode_1.isDigit(character, base)) {\n                    stream.next();\n                }\n                else if (base === 10) {\n                    if (character === '.' && !isExponent && !isDecimal) {\n                        isDecimal = true;\n                        stream.next();\n                    }\n                    else if (character === 'e' && !isExponent) {\n                        isExponent = true;\n                        stream.next();\n                        if (!stream.eos() && stream.peek() === '-') {\n                            stream.next();\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n                else if (base === 8 && abstractMode_1.isDigit(character, 10)) {\n                    base = 10;\n                    stream.next();\n                }\n                else {\n                    break;\n                }\n            }\n            var tokenType = 'number';\n            if (base === 16) {\n                tokenType += '.hex';\n            }\n            else if (base === 8) {\n                tokenType += '.octal';\n            }\n            else if (base === 2) {\n                tokenType += '.binary';\n            }\n            return { type: tokenType + '.php', nextState: this.parent };\n        };\n        return PHPNumber;\n    }(PHPState));\n    exports.PHPNumber = PHPNumber;\n    var PHPLineComment = (function (_super) {\n        __extends(PHPLineComment, _super);\n        function PHPLineComment(mode, parent) {\n            _super.call(this, mode, 'comment', parent, 'comment.php');\n        }\n        PHPLineComment.prototype.makeClone = function () {\n            return new PHPDocComment(this.getMode(), abstractState_1.AbstractState.safeClone(this.parent));\n        };\n        PHPLineComment.prototype.equals = function (other) {\n            if (other instanceof PHPLineComment) {\n                return (_super.prototype.equals.call(this, other));\n            }\n            return false;\n        };\n        PHPLineComment.prototype.tokenize = function (stream) {\n            while (!stream.eos()) {\n                var token = stream.next();\n                if (token === '?' && !stream.eos() && stream.peek() === '>') {\n                    stream.goBack(1);\n                    return { type: 'comment.php', nextState: this.parent };\n                }\n            }\n            return { type: 'comment.php', nextState: this.parent };\n        };\n        return PHPLineComment;\n    }(PHPState));\n    exports.PHPLineComment = PHPLineComment;\n    var PHPDocComment = (function (_super) {\n        __extends(PHPDocComment, _super);\n        function PHPDocComment(mode, parent) {\n            _super.call(this, mode, 'comment', parent, 'comment.php');\n        }\n        PHPDocComment.prototype.makeClone = function () {\n            return new PHPDocComment(this.getMode(), abstractState_1.AbstractState.safeClone(this.parent));\n        };\n        PHPDocComment.prototype.equals = function (other) {\n            if (other instanceof PHPDocComment) {\n                return (_super.prototype.equals.call(this, other));\n            }\n            return false;\n        };\n        PHPDocComment.prototype.tokenize = function (stream) {\n            while (!stream.eos()) {\n                var token = stream.next();\n                if (token === '*' && !stream.eos() && !stream.peekWhitespace() && stream.peek() === '/') {\n                    stream.next();\n                    return { type: 'comment.php', nextState: this.parent };\n                }\n            }\n            return { type: 'comment.php' };\n        };\n        return PHPDocComment;\n    }(PHPState));\n    exports.PHPDocComment = PHPDocComment;\n    var PHPStatement = (function (_super) {\n        __extends(PHPStatement, _super);\n        function PHPStatement(mode, parent) {\n            _super.call(this, mode, 'expression', parent);\n        }\n        PHPStatement.prototype.makeClone = function () {\n            return new PHPStatement(this.getMode(), abstractState_1.AbstractState.safeClone(this.parent));\n        };\n        PHPStatement.prototype.equals = function (other) {\n            if (other instanceof PHPStatement) {\n                return (_super.prototype.equals.call(this, other));\n            }\n            return false;\n        };\n        PHPStatement.prototype.stateTokenize = function (stream) {\n            if (abstractMode_1.isDigit(stream.peek(), 10)) {\n                return { nextState: new PHPNumber(this.getMode(), this, stream.next()) };\n            }\n            if (stream.advanceIfString('?>').length) {\n                return { type: 'metatag.php', nextState: this.parent };\n            }\n            var token = stream.nextToken();\n            if (isKeyword(token.toString().toLowerCase())) {\n                return { type: 'keyword.php' };\n            }\n            else if (isCompileTimeConstant(token)) {\n                return { type: 'constant.php' };\n            }\n            else if (isPreDefinedVariable(token)) {\n                return { type: 'variable.predefined.php' };\n            }\n            else if (isVariable(token)) {\n                return { type: 'variable.php' };\n            }\n            else if (token === '/') {\n                if (!stream.eos() && !stream.peekWhitespace()) {\n                    switch (stream.peekToken()) {\n                        case '/':\n                            return { nextState: new PHPLineComment(this.getMode(), this) };\n                        case '*':\n                            stream.nextToken();\n                            return { nextState: new PHPDocComment(this.getMode(), this) };\n                    }\n                }\n            }\n            else if (token === '#') {\n                return { nextState: new PHPLineComment(this.getMode(), this) };\n            }\n            else if (token === '\"' || token === '\\'') {\n                return { nextState: new PHPString(this.getMode(), this, token) };\n            }\n            else if (brackets.stringIsBracket(token)) {\n                return {\n                    type: brackets.tokenTypeFromString(token)\n                };\n            }\n            else if (isDelimiter(token)) {\n                return { type: 'delimiter.php' };\n            }\n            return { type: '' };\n        };\n        return PHPStatement;\n    }(PHPState));\n    exports.PHPStatement = PHPStatement;\n    var PHPPlain = (function (_super) {\n        __extends(PHPPlain, _super);\n        function PHPPlain(mode, parent) {\n            _super.call(this, mode, 'plain', parent);\n        }\n        PHPPlain.prototype.makeClone = function () {\n            return new PHPPlain(this.getMode(), abstractState_1.AbstractState.safeClone(this.parent));\n        };\n        PHPPlain.prototype.equals = function (other) {\n            if (other instanceof PHPPlain) {\n                return (_super.prototype.equals.call(this, other));\n            }\n            return false;\n        };\n        PHPPlain.prototype.stateTokenize = function (stream) {\n            if (stream.advanceIfStringCaseInsensitive('<?php').length ||\n                stream.advanceIfString('<?=').length || stream.advanceIfString('<%=').length ||\n                stream.advanceIfString('<?').length || stream.advanceIfString('<%').length) {\n                return {\n                    type: 'metatag.php',\n                    nextState: new PHPStatement(this.getMode(), new PHPEnterHTMLState(this.getMode(), this.parent))\n                };\n            }\n            stream.next();\n            return { type: '' };\n        };\n        return PHPPlain;\n    }(PHPState));\n    exports.PHPPlain = PHPPlain;\n    var PHPEnterHTMLState = (function (_super) {\n        __extends(PHPEnterHTMLState, _super);\n        function PHPEnterHTMLState(mode, parent) {\n            _super.call(this, mode, 'enterHTML', parent);\n        }\n        PHPEnterHTMLState.prototype.makeClone = function () {\n            return new PHPEnterHTMLState(this.getMode(), abstractState_1.AbstractState.safeClone(this.parent));\n        };\n        PHPEnterHTMLState.prototype.equals = function (other) {\n            if (other instanceof PHPEnterHTMLState) {\n                return (_super.prototype.equals.call(this, other));\n            }\n            return false;\n        };\n        return PHPEnterHTMLState;\n    }(PHPState));\n    exports.PHPEnterHTMLState = PHPEnterHTMLState;\n    var PHPMode = (function (_super) {\n        __extends(PHPMode, _super);\n        function PHPMode(descriptor, modeService, configurationService, editorWorkerService, compatWorkerService) {\n            _super.call(this, descriptor.id, compatWorkerService);\n            this.modeService = modeService;\n            this.tokenizationSupport = new tokenizationSupport_1.TokenizationSupport(this, this, true);\n            languageConfigurationRegistry_1.LanguageConfigurationRegistry.register(this.getId(), PHPMode.LANG_CONFIG);\n            if (editorWorkerService) {\n                Modes.SuggestRegistry.register(this.getId(), new suggestSupport_1.TextualSuggestSupport(editorWorkerService, configurationService), true);\n            }\n        }\n        PHPMode.prototype.getInitialState = function () {\n            // Because AbstractMode doesn't allow the initial state to immediately enter a nested\n            // mode, we will enter a nested mode ourselves\n            var htmlMode = this.modeService.getMode('text/html');\n            var htmlState = htmlMode.tokenizationSupport.getInitialState();\n            htmlState.setStateData(new PHPEnterHTMLState(this, null));\n            return htmlState;\n        };\n        PHPMode.prototype.enterNestedMode = function (state) {\n            return state instanceof PHPEnterHTMLState;\n        };\n        PHPMode.prototype.getNestedModeInitialState = function (myState) {\n            // Recall previous HTML state, that was saved in .parent, and carried over by the PHP states\n            // Also, prevent a .clone() endless loop by clearing the .parent pointer\n            // (the result will have its stateData point to myState)\n            var result = myState.parent;\n            myState.parent = null;\n            return {\n                state: result,\n                missingModePromise: null\n            };\n        };\n        PHPMode.prototype.getLeavingNestedModeData = function (line, state) {\n            // Leave HTML if <? is found on a line\n            var match = /<\\?/i.exec(line);\n            if (match !== null) {\n                return {\n                    nestedModeBuffer: line.substring(0, match.index),\n                    bufferAfterNestedMode: line.substring(match.index),\n                    stateAfterNestedMode: new PHPPlain(this, null)\n                };\n            }\n            return null;\n        };\n        PHPMode.prototype.onReturningFromNestedMode = function (myStateAfterNestedMode, lastNestedModeState) {\n            // Record in .parent the last HTML state before we entered into PHP\n            // The PHP states will take care of passing .parent along\n            // such that when we enter HTML again, we can recover the HTML state from .parent\n            myStateAfterNestedMode.parent = lastNestedModeState;\n        };\n        PHPMode.LANG_CONFIG = {\n            wordPattern: abstractMode_1.createWordRegExp('$_'),\n            comments: {\n                lineComment: '//',\n                blockComment: ['/*', '*/']\n            },\n            brackets: [\n                ['{', '}'],\n                ['[', ']'],\n                ['(', ')']\n            ],\n            autoClosingPairs: [\n                { open: '{', close: '}', notIn: ['string.php'] },\n                { open: '[', close: ']', notIn: ['string.php'] },\n                { open: '(', close: ')', notIn: ['string.php'] },\n                { open: '\"', close: '\"', notIn: ['string.php'] },\n                { open: '\\'', close: '\\'', notIn: ['string.php'] }\n            ]\n        };\n        PHPMode = __decorate([\n            __param(1, modeService_1.IModeService),\n            __param(2, configuration_1.IConfigurationService),\n            __param(3, editorWorkerService_1.IEditorWorkerService),\n            __param(4, compatWorkerService_1.ICompatWorkerService)\n        ], PHPMode);\n        return PHPMode;\n    }(abstractMode_1.CompatMode));\n    exports.PHPMode = PHPMode;\n});\n\n}).call(this);\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport WinJS = require('vs/base/common/winjs.base');\nimport objects = require('vs/base/common/objects');\nimport Modes = require('vs/editor/common/modes');\nimport {CompatMode, isDigit, createWordRegExp} from 'vs/editor/common/modes/abstractMode';\nimport {AbstractState} from 'vs/editor/common/modes/abstractState';\nimport {IModeService} from 'vs/editor/common/services/modeService';\nimport {LanguageConfigurationRegistry, LanguageConfiguration} from 'vs/editor/common/modes/languageConfigurationRegistry';\nimport {TokenizationSupport, ILeavingNestedModeData, ITokenizationCustomization} from 'vs/editor/common/modes/supports/tokenizationSupport';\nimport {TextualSuggestSupport} from 'vs/editor/common/modes/supports/suggestSupport';\nimport {IEditorWorkerService} from 'vs/editor/common/services/editorWorkerService';\nimport {IConfigurationService} from 'vs/platform/configuration/common/configuration';\nimport {ICompatWorkerService} from 'vs/editor/common/services/compatWorkerService';\n\n\nvar brackets = (function() {\n\n\tlet bracketsSource = [\n\t\t{ tokenType:'delimiter.bracket.php', open: '{', close: '}' },\n\t\t{ tokenType:'delimiter.array.php', open: '[', close: ']' },\n\t\t{ tokenType:'delimiter.parenthesis.php', open: '(', close: ')' }\n\t];\n\n\tlet MAP: {\n\t\t[text:string]:{\n\t\t\ttokenType: string;\n\t\t}\n\t} = Object.create(null);\n\n\tfor (let i = 0; i < bracketsSource.length; i++) {\n\t\tlet bracket = bracketsSource[i];\n\t\tMAP[bracket.open] = {\n\t\t\ttokenType: bracket.tokenType\n\t\t};\n\t\tMAP[bracket.close] = {\n\t\t\ttokenType: bracket.tokenType\n\t\t};\n\t}\n\n\treturn {\n\t\tstringIsBracket: (text:string): boolean => {\n\t\t\treturn !!MAP[text];\n\t\t},\n\t\ttokenTypeFromString: (text:string): string => {\n\t\t\treturn MAP[text].tokenType;\n\t\t}\n\t};\n})();\n\nvar delimiters = '+-*%&|^~!=<>(){}[]/?;:.,@';\nvar separators = '+-*/%&|^~!=<>(){}[]\"\\'\\\\/?;:.,#';\n\nvar whitespace = '\\t ';\n\nvar isKeyword = objects.createKeywordMatcher([\n\t'abstract', 'and', 'array', 'as', 'break',\n\t'callable', 'case', 'catch', 'cfunction', 'class', 'clone',\n\t'const', 'continue', 'declare', 'default', 'do',\n\t'else', 'elseif', 'enddeclare', 'endfor', 'endforeach',\n\t'endif', 'endswitch', 'endwhile', 'extends', 'false', 'final',\n\t'for', 'foreach', 'function', 'global', 'goto',\n\t'if', 'implements', 'interface', 'instanceof', 'insteadof',\n\t'namespace', 'new', 'null', 'object', 'old_function', 'or', 'private',\n\t'protected', 'public', 'resource', 'static', 'switch', 'throw', 'trait',\n\t'try', 'true', 'use', 'var', 'while', 'xor',\n\t'die', 'echo', 'empty', 'exit', 'eval',\n\t'include', 'include_once', 'isset', 'list', 'require',\n\t'require_once', 'return', 'print', 'unset', 'yield',\n\t'__construct'\n]);\n\nvar isCompileTimeConstant = objects.createKeywordMatcher([\n\t'__CLASS__',\n\t'__DIR__',\n\t'__FILE__',\n\t'__LINE__',\n\t'__NAMESPACE__',\n\t'__METHOD__',\n\t'__FUNCTION__',\n\t'__TRAIT__'\n]);\n\nvar isPreDefinedVariable =  objects.createKeywordMatcher([\n\t'$GLOBALS',\n\t'$_SERVER',\n\t'$_GET',\n\t'$_POST',\n\t'$_FILES',\n\t'$_REQUEST',\n\t'$_SESSION',\n\t'$_ENV',\n\t'$_COOKIE',\n\t'$php_errormsg',\n\t'$HTTP_RAW_POST_DATA',\n\t'$http_response_header',\n\t'$argc',\n\t'$argv'\n]);\n\nvar isDelimiter = (character:string) => {\n\treturn delimiters.indexOf(character) > -1;\n};\n\nvar isVariable = (character:string) => {\n\treturn (character[0] === '$');\n};\n\nexport class PHPState extends AbstractState {\n\n\tprivate name:string;\n\tprivate whitespaceTokenType:string;\n\tpublic parent:Modes.IState;\n\n\tconstructor(mode:Modes.IMode, name:string, parent:Modes.IState, whitespaceTokenType:string='') {\n\t\tsuper(mode);\n\t\tthis.name = name;\n\t\tthis.parent = parent;\n\t\tthis.whitespaceTokenType = whitespaceTokenType;\n\t}\n\n\tpublic equals(other:Modes.IState):boolean {\n\t\tif (other instanceof PHPState) {\n\t\t\treturn (\n\t\t\t\tsuper.equals(other) &&\n\t\t\t\tthis.name === other.name &&\n\t\t\t\tthis.whitespaceTokenType === other.whitespaceTokenType &&\n\t\t\t\tAbstractState.safeEquals(this.parent, other.parent)\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic tokenize(stream:Modes.IStream):Modes.ITokenizationResult {\n\t\tstream.setTokenRules(separators, whitespace);\n\t\tif (stream.skipWhitespace().length > 0) {\n\t\t\treturn { type: this.whitespaceTokenType };\n\t\t}\n\t\treturn this.stateTokenize(stream);\n\t}\n\n\tpublic stateTokenize(stream:Modes.IStream):Modes.ITokenizationResult {\n\t\tthrow new Error('To be implemented');\n\t}\n\n}\n\nexport class PHPString extends PHPState {\n\n\tprivate delimiter:string;\n\tprivate isAtBeginning:boolean;\n\n\tconstructor(mode:Modes.IMode, parent:Modes.IState, delimiter:string, isAtBeginning:boolean=true) {\n\t\tsuper(mode, 'string', parent, 'string.php');\n\t\tthis.delimiter = delimiter;\n\t\tthis.isAtBeginning = isAtBeginning;\n\t}\n\n\tpublic makeClone():AbstractState {\n\t\treturn new PHPString(this.getMode(), AbstractState.safeClone(this.parent), this.delimiter, this.isAtBeginning);\n\t}\n\n\tpublic equals(other:Modes.IState):boolean {\n\t\tif (other instanceof PHPString) {\n\t\t\treturn (\n\t\t\t\tsuper.equals(other) &&\n\t\t\t\tthis.delimiter === other.delimiter &&\n\t\t\t\tthis.isAtBeginning === other.isAtBeginning\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic tokenize(stream:Modes.IStream):Modes.ITokenizationResult {\n\t\tvar readChars = this.isAtBeginning ? 1 : 0;\n\t\tthis.isAtBeginning = false;\n\t\twhile (!stream.eos()) {\n\t\t\tvar c = stream.next();\n\t\t\tif (c === '\\\\') {\n\t\t\t\tif (readChars === 0) {\n\t\t\t\t\tif (stream.eos()) {\n\t\t\t\t\t\treturn { type: 'string.php', nextState: this.parent  };\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstream.next();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstream.goBack(1);\n\t\t\t\t\treturn { type: 'string.php' };\n\t\t\t\t}\n\n\t\t\t} else if (c === this.delimiter) {\n\t\t\t\treturn { type: 'string.php' , nextState: this.parent };\n\t\t\t}\n\t\t\treadChars += 1;\n\t\t}\n\t\treturn { type: 'string.php' };\n\t}\n}\n\nexport class PHPNumber extends PHPState {\n\n\tprivate firstDigit:string;\n\n\tconstructor(mode:Modes.IMode, parent:Modes.IState, firstDigit:string) {\n\t\tsuper(mode, 'number', parent);\n\t\tthis.firstDigit = firstDigit;\n\t}\n\n\tpublic makeClone():AbstractState {\n\t\treturn new PHPNumber(this.getMode(), AbstractState.safeClone(this.parent), this.firstDigit);\n\t}\n\n\tpublic equals(other:Modes.IState):boolean {\n\t\tif (other instanceof PHPNumber) {\n\t\t\treturn (\n\t\t\t\tsuper.equals(other) &&\n\t\t\t\tthis.firstDigit === other.firstDigit\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic tokenize(stream:Modes.IStream):Modes.ITokenizationResult {\n\t\tvar character = this.firstDigit;\n\t\tvar base = 10, isDecimal = false, isExponent = false;\n\t\tif (character === '0' && !stream.eos()) {\n\t\t\tcharacter = stream.peek();\n\t\t\tif (character.toLowerCase() === 'x') { base = 16; }\n\t\t\telse if (character.toLowerCase() === 'b') { base = 2; }\n\t\t\telse if (character === '.') { base = 10; }\n\t\t\telse if (isDigit(character, 8)) { base = 8; }\n\t\t\telse {\n\t\t\t\treturn { type: 'number.php', nextState: this.parent };\n\t\t\t}\n\t\t\tstream.next();\n\t\t}\n\t\twhile (!stream.eos()) {\n\t\t\tcharacter = stream.peek();\n\t\t\tif (isDigit(character,base)) {\n\t\t\t\tstream.next();\n\t\t\t} else if (base === 10) {\n\t\t\t\tif (character === '.' && !isExponent && !isDecimal) {\n\t\t\t\t\tisDecimal = true;\n\t\t\t\t\tstream.next();\n\t\t\t\t} else if (character === 'e' && !isExponent) {\n\t\t\t\t\tisExponent = true;\n\t\t\t\t\tstream.next();\n\t\t\t\t\tif (!stream.eos() && stream.peek() === '-') {\n\t\t\t\t\t\tstream.next();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (base === 8 && isDigit(character,10)) {\n\t\t\t\tbase = 10;\n\t\t\t\tstream.next();\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar tokenType = 'number';\n\t\tif (base === 16) {\n\t\t\ttokenType += '.hex';\n\t\t} else if (base === 8) {\n\t\t\ttokenType += '.octal';\n\t\t} else if (base === 2) {\n\t\t\ttokenType += '.binary';\n\t\t}\n\t\treturn { type: tokenType + '.php', nextState: this.parent };\n\t}\n}\n\nexport class PHPLineComment extends PHPState {\n\n\tconstructor(mode:Modes.IMode, parent:Modes.IState) {\n\t\tsuper(mode, 'comment', parent, 'comment.php');\n\t}\n\n\tpublic makeClone():AbstractState {\n\t\treturn new PHPDocComment(this.getMode(), AbstractState.safeClone(this.parent));\n\t}\n\n\tpublic equals(other:Modes.IState):boolean {\n\t\tif (other instanceof PHPLineComment) {\n\t\t\treturn (\n\t\t\t\tsuper.equals(other)\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic tokenize(stream:Modes.IStream):Modes.ITokenizationResult {\n\t\twhile (!stream.eos()) {\n\t\t\tvar token = stream.next();\n\t\t\tif (token === '?' && !stream.eos() && stream.peek() === '>') {\n\t\t\t\tstream.goBack(1);\n\t\t\t\treturn { type: 'comment.php', nextState: this.parent};\n\t\t\t}\n\t\t}\n\t\treturn { type: 'comment.php', nextState: this.parent };\n\t}\n}\n\nexport class PHPDocComment extends PHPState {\n\n\tconstructor(mode:Modes.IMode, parent:Modes.IState) {\n\t\tsuper(mode, 'comment', parent, 'comment.php');\n\t}\n\n\tpublic makeClone():AbstractState {\n\t\treturn new PHPDocComment(this.getMode(), AbstractState.safeClone(this.parent));\n\t}\n\n\tpublic equals(other:Modes.IState):boolean {\n\t\tif (other instanceof PHPDocComment) {\n\t\t\treturn (\n\t\t\t\tsuper.equals(other)\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic tokenize(stream:Modes.IStream):Modes.ITokenizationResult {\n\t\twhile (!stream.eos()) {\n\t\t\tvar token = stream.next();\n\t\t\tif (token === '*' && !stream.eos() && !stream.peekWhitespace() && stream.peek() === '/') {\n\t\t\t\tstream.next();\n\t\t\t\treturn { type: 'comment.php', nextState: this.parent};\n\t\t\t}\n\t\t}\n\t\treturn { type: 'comment.php' };\n\t}\n}\n\nexport class PHPStatement extends PHPState {\n\n\tconstructor(mode:Modes.IMode, parent:Modes.IState) {\n\t\tsuper(mode, 'expression', parent);\n\t}\n\n\tpublic makeClone():AbstractState {\n\t\treturn new PHPStatement(this.getMode(), AbstractState.safeClone(this.parent));\n\t}\n\n\tpublic equals(other:Modes.IState):boolean {\n\t\tif (other instanceof PHPStatement) {\n\t\t\treturn (\n\t\t\t\tsuper.equals(other)\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic stateTokenize(stream:Modes.IStream):Modes.ITokenizationResult {\n\t\tif (isDigit(stream.peek(), 10)) {\n\t\t\treturn { nextState: new PHPNumber(this.getMode(), this, stream.next()) };\n\t\t}\n\t\tif (stream.advanceIfString('?>').length) {\n\t\t\treturn { type: 'metatag.php', nextState: this.parent };\n\t\t}\n\n\t\tvar token = stream.nextToken();\n\t\tif (isKeyword(token.toString().toLowerCase())) {\n\t\t\treturn { type: 'keyword.php' };\n\t\t} else if (isCompileTimeConstant(token)) {\n\t\t\treturn { type: 'constant.php' };\n\t\t} else if (isPreDefinedVariable(token)) {\n\t\t\treturn { type: 'variable.predefined.php' };\n\t\t} else if (isVariable(token)) {\n\t\t\treturn { type: 'variable.php' };\n\t\t} else if (token === '/') {\n\t\t\tif (!stream.eos() && !stream.peekWhitespace()) {\n\t\t\t\tswitch(stream.peekToken()) {\n\t\t\t\t\tcase '/':\n\t\t\t\t\t\treturn { nextState: new PHPLineComment(this.getMode(), this) };\n\t\t\t\t\tcase '*':\n\t\t\t\t\t\tstream.nextToken();\n\t\t\t\t\t\treturn { nextState: new PHPDocComment(this.getMode(), this) };\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (token === '#') {\n\t\t\treturn { nextState: new PHPLineComment(this.getMode(), this) };\n\t\t} else if (token === '\"' || token === '\\'') {\n\t\t\treturn { nextState: new PHPString(this.getMode(), this, token) };\n\t\t} else if (brackets.stringIsBracket(token)) {\n\t\t\treturn {\n\t\t\t\ttype: brackets.tokenTypeFromString(token)\n\t\t\t};\n\t\t} else if (isDelimiter(token)) {\n\t\t\treturn { type: 'delimiter.php' };\n\t\t}\n\t\treturn { type: '' };\n\t}\n}\n\nexport class PHPPlain extends PHPState {\n\n\tconstructor(mode:Modes.IMode, parent:Modes.IState) {\n\t\tsuper(mode, 'plain', parent);\n\t}\n\n\tpublic makeClone():AbstractState {\n\t\treturn new PHPPlain(this.getMode(), AbstractState.safeClone(this.parent));\n\t}\n\n\tpublic equals(other:Modes.IState):boolean {\n\t\tif (other instanceof PHPPlain) {\n\t\t\treturn (\n\t\t\t\tsuper.equals(other)\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic stateTokenize(stream:Modes.IStream):Modes.ITokenizationResult {\n\t\tif (stream.advanceIfStringCaseInsensitive('<?php').length ||\n\t\tstream.advanceIfString('<?=').length || stream.advanceIfString('<%=').length ||\n\t\tstream.advanceIfString('<?').length || stream.advanceIfString('<%').length) {\n\t\t\treturn {\n\t\t\t\ttype: 'metatag.php',\n\t\t\t\tnextState: new PHPStatement(this.getMode(), new PHPEnterHTMLState(this.getMode(), this.parent))\n\t\t\t};\n\t\t}\n\t\tstream.next();\n\t\treturn { type: '' };\n\t}\n}\n\nexport class PHPEnterHTMLState extends PHPState {\n\n\tconstructor(mode:Modes.IMode, parent:Modes.IState) {\n\t\tsuper(mode, 'enterHTML', parent);\n\t}\n\n\tpublic makeClone():AbstractState {\n\t\treturn new PHPEnterHTMLState(this.getMode(), AbstractState.safeClone(this.parent));\n\t}\n\n\tpublic equals(other:Modes.IState):boolean {\n\t\tif (other instanceof PHPEnterHTMLState) {\n\t\t\treturn (\n\t\t\t\tsuper.equals(other)\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n}\n\nexport class PHPMode extends CompatMode implements ITokenizationCustomization {\n\n\tpublic static LANG_CONFIG:LanguageConfiguration = {\n\t\twordPattern: createWordRegExp('$_'),\n\n\t\tcomments: {\n\t\t\tlineComment: '//',\n\t\t\tblockComment: ['/*', '*/']\n\t\t},\n\n\t\tbrackets: [\n\t\t\t['{', '}'],\n\t\t\t['[', ']'],\n\t\t\t['(', ')']\n\t\t],\n\n\t\tautoClosingPairs: [\n\t\t\t{ open: '{', close: '}', notIn: ['string.php'] },\n\t\t\t{ open: '[', close: ']', notIn: ['string.php'] },\n\t\t\t{ open: '(', close: ')', notIn: ['string.php'] },\n\t\t\t{ open: '\"', close: '\"', notIn: ['string.php'] },\n\t\t\t{ open: '\\'', close: '\\'', notIn: ['string.php'] }\n\t\t]\n\t};\n\n\tpublic tokenizationSupport: Modes.ITokenizationSupport;\n\n\tprivate modeService:IModeService;\n\n\tconstructor(\n\t\tdescriptor:Modes.IModeDescriptor,\n\t\t@IModeService modeService: IModeService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IEditorWorkerService editorWorkerService: IEditorWorkerService,\n\t\t@ICompatWorkerService compatWorkerService: ICompatWorkerService\n\t) {\n\t\tsuper(descriptor.id, compatWorkerService);\n\t\tthis.modeService = modeService;\n\n\t\tthis.tokenizationSupport = new TokenizationSupport(this, this, true);\n\n\t\tLanguageConfigurationRegistry.register(this.getId(), PHPMode.LANG_CONFIG);\n\n\t\tif (editorWorkerService) {\n\t\t\tModes.SuggestRegistry.register(this.getId(), new TextualSuggestSupport(editorWorkerService, configurationService), true);\n\t\t}\n\t}\n\n\tpublic getInitialState():Modes.IState {\n\t\t// Because AbstractMode doesn't allow the initial state to immediately enter a nested\n\t\t// mode, we will enter a nested mode ourselves\n\t\tvar htmlMode = this.modeService.getMode('text/html');\n\t\tvar htmlState:Modes.IState = htmlMode.tokenizationSupport.getInitialState();\n\t\thtmlState.setStateData(new PHPEnterHTMLState(this, null));\n\t\treturn htmlState;\n\t}\n\n\tpublic enterNestedMode(state:Modes.IState):boolean {\n\t\treturn state instanceof PHPEnterHTMLState;\n\t}\n\n\tpublic getNestedModeInitialState(myState:Modes.IState): { state:Modes.IState; missingModePromise:WinJS.Promise; } {\n\t\t// Recall previous HTML state, that was saved in .parent, and carried over by the PHP states\n\t\t// Also, prevent a .clone() endless loop by clearing the .parent pointer\n\t\t// (the result will have its stateData point to myState)\n\t\tvar result = (<PHPState>myState).parent;\n\t\t(<PHPState>myState).parent = null;\n\t\treturn {\n\t\t\tstate: result,\n\t\t\tmissingModePromise: null\n\t\t};\n\t}\n\n\tpublic getLeavingNestedModeData(line:string, state:Modes.IState):ILeavingNestedModeData {\n\t\t// Leave HTML if <? is found on a line\n\t\tvar match:any = /<\\?/i.exec(line);\n\t\tif (match !== null) {\n\t\t\treturn {\n\t\t\t\tnestedModeBuffer: line.substring(0, match.index),\n\t\t\t\tbufferAfterNestedMode: line.substring(match.index),\n\t\t\t\tstateAfterNestedMode: new PHPPlain(this, null)\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic onReturningFromNestedMode(myStateAfterNestedMode:Modes.IState, lastNestedModeState:Modes.IState): void {\n\t\t// Record in .parent the last HTML state before we entered into PHP\n\t\t// The PHP states will take care of passing .parent along\n\t\t// such that when we enter HTML again, we can recover the HTML state from .parent\n\t\t(<PHPPlain>myStateAfterNestedMode).parent = lastNestedModeState;\n\t}\n}\n"]}