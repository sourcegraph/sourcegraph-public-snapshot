{"version":3,"sources":["fake","file:///home/aeschli/workspaces/vscode/src/vs/languages/handlebars/common/handlebarsTokenTypes.ts","file:///home/aeschli/workspaces/vscode/src/vs/languages/handlebars/common/handlebars.ts"],"names":[],"mappings":"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","file":"vs/languages/handlebars/common/handlebars.js","sourcesContent":["}).call(this);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nexport const EMBED = 'punctuation.expression.unescaped.handlebars';\nexport const EMBED_UNESCAPED = 'punctuation.expression.handlebars';\nexport const KEYWORD = 'keyword.helper.handlebars';\nexport const VARIABLE = 'variable.parameter.handlebars';","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport modes = require('vs/editor/common/modes');\nimport htmlMode = require('vs/languages/html/common/html');\nimport handlebarsTokenTypes = require('vs/languages/handlebars/common/handlebarsTokenTypes');\nimport htmlWorker = require('vs/languages/html/common/htmlWorker');\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {IModeService} from 'vs/editor/common/services/modeService';\nimport {LanguageConfigurationRegistry, LanguageConfiguration} from 'vs/editor/common/modes/languageConfigurationRegistry';\nimport {createWordRegExp} from 'vs/editor/common/modes/abstractMode';\nimport {ILeavingNestedModeData} from 'vs/editor/common/modes/supports/tokenizationSupport';\nimport {wireCancellationToken} from 'vs/base/common/async';\nimport {ICompatWorkerService} from 'vs/editor/common/services/compatWorkerService';\n\nexport enum States {\n\tHTML,\n\tExpression,\n\tUnescapedExpression\n}\n\nexport class HandlebarsState extends htmlMode.State {\n\n\tconstructor(mode:modes.IMode,\n\t\tpublic kind:htmlMode.States,\n\t\tpublic handlebarsKind:States,\n\t\tpublic lastTagName:string,\n\t\tpublic lastAttributeName:string,\n\t\tpublic embeddedContentType:string,\n\t\tpublic attributeValueQuote:string,\n\t\tpublic attributeValue:string) {\n\n\t\tsuper(mode, kind, lastTagName, lastAttributeName, embeddedContentType, attributeValueQuote, attributeValue);\n\t}\n\n\tpublic makeClone(): HandlebarsState {\n\t\treturn new HandlebarsState(this.getMode(), this.kind, this.handlebarsKind, this.lastTagName, this.lastAttributeName, this.embeddedContentType, this.attributeValueQuote, this.attributeValue);\n\t}\n\n\tpublic equals(other:modes.IState):boolean {\n\t\tif (other instanceof HandlebarsState) {\n\t\t\treturn (\n\t\t\t\tsuper.equals(other)\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic tokenize(stream:modes.IStream) : modes.ITokenizationResult {\n\t\tswitch(this.handlebarsKind) {\n\t\t\tcase States.HTML:\n\t\t\t\tif (stream.advanceIfString('{{{').length > 0) {\n\t\t\t\t\tthis.handlebarsKind = States.UnescapedExpression;\n\t\t\t\t\treturn { type: handlebarsTokenTypes.EMBED_UNESCAPED };\n\t\t\t\t}\n\t\t\t\telse if (stream.advanceIfString('{{').length > 0) {\n\t\t\t\t\tthis.handlebarsKind = States.Expression;\n\t\t\t\t\treturn { type: handlebarsTokenTypes.EMBED };\n\t\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase States.Expression:\n\t\t\tcase States.UnescapedExpression:\n\t\t\t\tif (this.handlebarsKind === States.Expression && stream.advanceIfString('}}').length > 0) {\n\t\t\t\t\tthis.handlebarsKind = States.HTML;\n\t\t\t\t\treturn { type: handlebarsTokenTypes.EMBED };\n\t\t\t\t}\n\t\t\t\telse if (this.handlebarsKind === States.UnescapedExpression &&stream.advanceIfString('}}}').length > 0) {\n\t\t\t\t\tthis.handlebarsKind = States.HTML;\n\t\t\t\t\treturn { type: handlebarsTokenTypes.EMBED_UNESCAPED };\n\t\t\t\t}\n\t\t\t\telse if(stream.skipWhitespace().length > 0) {\n\t\t\t\t\treturn { type: ''};\n\t\t\t\t}\n\n\t\t\t\tif(stream.peek() === '#') {\n\t\t\t\t\tstream.advanceWhile(/^[^\\s}]/);\n\t\t\t\t\treturn { type: handlebarsTokenTypes.KEYWORD };\n\t\t\t\t}\n\n\t\t\t\tif(stream.peek() === '/') {\n\t\t\t\t\tstream.advanceWhile(/^[^\\s}]/);\n\t\t\t\t\treturn { type: handlebarsTokenTypes.KEYWORD };\n\t\t\t\t}\n\n\t\t\t\tif(stream.advanceIfString('else')) {\n\t\t\t\t\tvar next = stream.peek();\n\t\t\t\t\tif(next === ' ' || next === '\\t' || next === '}') {\n\t\t\t\t\t\treturn { type: handlebarsTokenTypes.KEYWORD };\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tstream.goBack(4);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(stream.advanceWhile(/^[^\\s}]/).length > 0) {\n\t\t\t\t\treturn { type: handlebarsTokenTypes.VARIABLE };\n\t\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\treturn super.tokenize(stream);\n\t}\n}\n\nexport class HandlebarsMode extends htmlMode.HTMLMode<htmlWorker.HTMLWorker> {\n\n\tpublic static LANG_CONFIG:LanguageConfiguration = {\n\t\twordPattern: createWordRegExp('#-?%'),\n\n\t\tcomments: {\n\t\t\tblockComment: ['<!--', '-->']\n\t\t},\n\n\t\tbrackets: [\n\t\t\t['<!--', '-->'],\n\t\t\t['{{', '}}']\n\t\t],\n\n\t\t__electricCharacterSupport: {\n\t\t\tembeddedElectricCharacters: ['*', '}', ']', ')']\n\t\t},\n\n\t\tautoClosingPairs: [\n\t\t\t{ open: '{', close: '}' },\n\t\t\t{ open: '[', close: ']' },\n\t\t\t{ open: '(', close: ')' },\n\t\t\t{ open: '\"', close: '\"' },\n\t\t\t{ open: '\\'', close: '\\'' }\n\t\t],\n\n\t\tsurroundingPairs: [\n\t\t\t{ open: '<', close: '>' },\n\t\t\t{ open: '\"', close: '\"' },\n\t\t\t{ open: '\\'', close: '\\'' }\n\t\t],\n\n\t\tonEnterRules: [\n\t\t\t{\n\t\t\t\tbeforeText: new RegExp(`<(?!(?:${htmlMode.EMPTY_ELEMENTS.join('|')}))(\\\\w[\\\\w\\\\d]*)([^/>]*(?!/)>)[^<]*$`, 'i'),\n\t\t\t\tafterText: /^<\\/(\\w[\\w\\d]*)\\s*>$/i,\n\t\t\t\taction: { indentAction: modes.IndentAction.IndentOutdent }\n\t\t\t},\n\t\t\t{\n\t\t\t\tbeforeText: new RegExp(`<(?!(?:${htmlMode.EMPTY_ELEMENTS.join('|')}))(\\\\w[\\\\w\\\\d]*)([^/>]*(?!/)>)[^<]*$`, 'i'),\n\t\t\t\taction: { indentAction: modes.IndentAction.Indent }\n\t\t\t}\n\t\t],\n\t};\n\n\tconstructor(\n\t\tdescriptor:modes.IModeDescriptor,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IModeService modeService: IModeService,\n\t\t@ICompatWorkerService compatWorkerService: ICompatWorkerService\n\t) {\n\t\tsuper(descriptor, instantiationService, modeService, compatWorkerService);\n\t}\n\n\tprotected _registerSupports(): void {\n\t\tmodes.SuggestRegistry.register(this.getId(), {\n\t\t\ttriggerCharacters: ['.', ':', '<', '\"', '=', '/'],\n\t\t\tshouldAutotriggerSuggest: true,\n\t\t\tprovideCompletionItems: (model, position, token): Thenable<modes.ISuggestResult[]> => {\n\t\t\t\treturn wireCancellationToken(token, this._provideCompletionItems(model.uri, position));\n\t\t\t}\n\t\t}, true);\n\n\t\tmodes.DocumentHighlightProviderRegistry.register(this.getId(), {\n\t\t\tprovideDocumentHighlights: (model, position, token): Thenable<modes.DocumentHighlight[]> => {\n\t\t\t\treturn wireCancellationToken(token, this._provideDocumentHighlights(model.uri, position));\n\t\t\t}\n\t\t}, true);\n\n\t\tmodes.LinkProviderRegistry.register(this.getId(), {\n\t\t\tprovideLinks: (model, token): Thenable<modes.ILink[]> => {\n\t\t\t\treturn wireCancellationToken(token, this._provideLinks(model.uri));\n\t\t\t}\n\t\t}, true);\n\n\t\tLanguageConfigurationRegistry.register(this.getId(), HandlebarsMode.LANG_CONFIG);\n\t}\n\n\tpublic getInitialState() : modes.IState {\n\t\treturn new HandlebarsState(this, htmlMode.States.Content, States.HTML, '', '', '', '', '');\n\t}\n\n\tpublic getLeavingNestedModeData(line:string, state:modes.IState):ILeavingNestedModeData {\n\t\tvar leavingNestedModeData = super.getLeavingNestedModeData(line, state);\n\t\tif (leavingNestedModeData) {\n\t\t\tleavingNestedModeData.stateAfterNestedMode = new HandlebarsState(this, htmlMode.States.Content, States.HTML, '', '', '', '', '');\n\t\t}\n\t\treturn leavingNestedModeData;\n\t}\n}\n"]}