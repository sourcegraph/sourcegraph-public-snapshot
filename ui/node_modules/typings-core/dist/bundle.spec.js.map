{"version":3,"file":"bundle.spec.js","sourceRoot":"","sources":["../src/bundle.spec.ts"],"names":[],"mappings":";AAAA,IAAO,IAAI,WAAW,WAAW,CAAC,CAAA;AAClC,qBAAqB,MACrB,CAAC,CAD0B;AAC3B,uBAAuB,UACvB,CAAC,CADgC;AACjC,mBAAiC,YACjC,CAAC,CAD4C;AAC7C,uBAA6B,QAE7B,CAAC,CAFoC;AAErC,IAAM,OAAO,GAAG,IAAI,qBAAY,EAAE,CAAA;AAElC,IAAI,CAAC,QAAQ,EAAE,UAAA,CAAC;IACd,CAAC,CAAC,IAAI,CAAC,mBAAmB,EAAE,UAAA,CAAC;QAC3B,IAAM,WAAW,GAAG,WAAI,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAA;QAEtD,MAAM,CAAC,WAAM,CAAC,WAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;aACpC,IAAI,CAAC;YACJ,MAAM,CAAC,eAAM,CAAC;gBACZ,GAAG,EAAE,WAAW;gBAChB,IAAI,EAAE,SAAS;gBACf,GAAG,EAAE,WAAI,CAAC,WAAW,EAAE,KAAK,EAAE,aAAa,CAAC;gBAC5C,MAAM,EAAE,KAAK;gBACb,SAAA,OAAO;aACR,CAAC,CAAA;QACJ,CAAC,CAAC;aACD,IAAI,CAAC;YACJ,MAAM,CAAC,aAAQ,CAAC,WAAI,CAAC,WAAW,EAAE,KAAK,EAAE,aAAa,CAAC,EAAE,MAAM,CAAC,CAAA;QAClE,CAAC,CAAC;aACD,IAAI,CAAC,UAAU,QAAQ;YACtB,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE;gBAChB,yBAAyB;gBACzB,qCAAqC;gBACrC,kCAAoC;gBACpC,kCAAkC;gBAClC,GAAG;gBACH,EAAE;gBACF,yBAAyB;gBACzB,uBAAuB;gBACvB,4BAA8B;gBAC9B,sCAAwC;gBACxC,GAAG;gBACH,EAAE;aACH,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;QACf,CAAC,CAAC,CAAA;IACN,CAAC,CAAC,CAAA;AACJ,CAAC,CAAC,CAAA","sourcesContent":["import test = require('blue-tape')\nimport { join } from 'path'\nimport { bundle } from './bundle'\nimport { rimraf, readFile } from './utils/fs'\nimport { EventEmitter } from 'events'\n\nconst emitter = new EventEmitter()\n\ntest('bundle', t => {\n  t.test('bundle everything', t => {\n    const FIXTURE_DIR = join(__dirname, '__test__/bundle')\n\n    return rimraf(join(FIXTURE_DIR, 'out'))\n      .then(() => {\n        return bundle({\n          cwd: FIXTURE_DIR,\n          name: 'example',\n          out: join(FIXTURE_DIR, 'out', 'bundle.d.ts'),\n          global: false,\n          emitter\n        })\n      })\n      .then(function () {\n        return readFile(join(FIXTURE_DIR, 'out', 'bundle.d.ts'), 'utf8')\n      })\n      .then(function (contents) {\n        t.equal(contents, [\n          `// Generated by typings`,\n          `// Source: custom_typings/test.d.ts`,\n          `declare module \\'~example~test\\' {`,\n          `export function test (): string;`,\n          `}`,\n          ``,\n          `// Generated by typings`,\n          `// Source: index.d.ts`,\n          `declare module \\'example\\' {`,\n          `export { test } from \\'~example~test\\'`,\n          `}`,\n          ''\n        ].join('\\n'))\n      })\n  })\n})\n"]}