// The Sourcegraph site configuration for development servers.
{
  "appURL": "http://localhost:3080",
  "experimentalFeatures": {
    "configVars": "enabled",
    "canonicalURLRedirect": "enabled",
    "multipleAuthProviders": "enabled",
    "updateScheduler": "enabled",
    "discussions": "enabled"
  },
  "htmlHeadTop":
    "<script>if (localStorage.getItem('disableDefaultFeatureFlags') !== 'true') { localStorage.setItem('enable-file-history', 'true'); }</script>",
  "disablePublicRepoRedirects": true,
  "phabricator": [
    {
      "url": "https://phabricator.sgdev.org",
      // Uncomment one or the other of these configs depending on your testing needs.
      // Both "token" and "repos" are optional but you need to have at least one set.
      "repos": [
        {
          "path": "gitolite.sgdev.org/testing",
          "callsign": "TEST"
        },
        {
          "path": "github.com/sgtest/jump",
          "callsign": "JUMP"
        },
        {
          "path": "git-codecommit.us-west-1.amazonaws.com/stripe-go",
          "callsign": "STRIPEGO"
        }
      ]
      // "token": "api-5ngcoazuyugsoiuumxxuhd4g26ac"
    }
  ],
  // To test with Gitolite, set up SSH authentication for gitolite.sgdev.org using
  // this private key: https://sourcegraph.sgdev.org/github.com/sourcegraph/infrastructure/-/blob/datacenter/dogfood/id_rsa
  //
  // "gitolite": [
  //   {
  //     "host": "git@gitolite.sgdev.org",
  //     "prefix": "gitolite.sgdev.org/",
  //     "blacklist": "blacklist",
  //     "phabricatorMetadataCommand": "echo $$REPO | tr -cd '[A-Za-z]' | tail -c 4 | tr [a-z] [A-Z]"
  //   }
  // ],
  "github": [
    {
      "url": "https://github.com",
      "token": "e99201f23d4c8d2d7d3df4c0cb23a4804ad5f1b8" // unprivileged sqs-test user
    },
    {
      "url": "http://ghe.sgdev.org",
      "token": "23993bbf8e0fee068b8f70db05fc445d5a7a83da"
    }
  ],
  "repos.list": [{ "path": "github.com/sgtest/jump", "url": "https://github.com/sgtest/jump" }],
  "bitbucketServer": [
    // creds: admin / WhYw6x9GSxmbmg4m
    {
      "url": "https://bitbucket.sgdev.org",
      "token": "NDczNDE0NDg0OTk3OrfPrmh/lmU2c3P7Xat+d/aOoZb/"
      // You can also specify username/password instead:
      //
      // "username": "admin",
      // "password": "WhYw6x9GSxmbmg4m"
    }
  ],
  "awsCodeCommit": [
    // arn:aws:iam::185007729374:user/code-commit-reader, which has read-only perms to AWS CodeCommit and no access
    // to secret repositories.
    {
      "region": "us-west-1",
      "accessKeyID": "AKIAIG7POXJDKGNQXCPA",
      "secretAccessKey": "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",
      "repositoryPathPattern": "git-codecommit.us-west-1.amazonaws.com/{name}"
    }
  ],
  "gitlab": [
    {
      // This access token belongs to keegan+gitlabbot@sourcegraph.com
      "url": "https://gitlab.com",
      "token": "yNoBnyFzP1zMPuLWqYpN"
    }
  ],
  "lightstepProject": "sourcegraph-dev",
  "lightstepAccessToken": "025f49bbe1eb074930a1de12c90542d5",
  "repoListUpdateInterval": 1,
  "email.address": "noreply+${USER}@sourcegraph.com", // ${USER} is interpolated when SOURCEGRAPH_EXPAND_CONFIG_VARS=1
  "email.smtp": {
    "host": "smtp.gmail.com",
    "port": 587,
    "authentication": "PLAIN",
    "username": "notifications@sourcegraph.com",
    "password": "oyytqrfkalikjilf"
  },
  "langservers": [
    {
      "address": "tcp://localhost:4389",
      "language": "go"
    },
    {
      "address": "tcp://localhost:2083",
      "language": "python"
    }
  ],
  "update.channel": "release",
  "corsOrigin": "https://github.com https://phabricator.sgdev.org https://bitbucket.sgdev.org",

  // Uncomment to enable Sentry (dev project)
  //
  // "log": {
  //   "sentry": {
  //     "dsn": "https://db92555619b44699bae746b25062d04f:ac28d23769104c86b5418cd60560692e@sentry.io/1243424"
  //   },
  // },

  "auth.providers": [
    // AUTHENTICATION
    //
    // Only the first entry is used. Comment out the preceding entries to enable other auth providers.
    //
    { "type": "builtin", "allowSignup": true },
    //
    //
    // See dev/auth-provider/README.md for more information on how to use the Keycloak OpenID/SAML
    // auth provider for local dev.
    //
    // Log in via Keycloak with username "alice" or "bob" (password is "q" for both).
    //
    {
      "type": "openidconnect",
      "displayName": "Keycloak local OpenID Connect #1 (dev)",
      "issuer": "http://localhost:3220/auth/realms/master",
      "clientID": "sourcegraph-client-openid",
      "clientSecret": "3153e9d7-2d06-49d7-be84-cc61c07173a4"
    },
    {
      "type": "openidconnect",
      "displayName": "Keycloak local OpenID Connect #2 (dev)",
      "issuer": "http://localhost:3220/auth/realms/master",
      "clientID": "sourcegraph-client-openid-2",
      "clientSecret": "0d60ca04-f333-48a4-96a1-aacf5f06b351"
    },
    {
      "type": "saml",
      "displayName": "Keycloak local SAML #1 (dev)",
      "identityProviderMetadataURL": "http://localhost:3220/auth/realms/master/protocol/saml/descriptor"
    },
    {
      "type": "saml",
      "displayName": "Keycloak local SAML #2 (dev)",
      "serviceProviderIssuer": "http://localhost:3080/.auth/saml/metadata?2",
      "identityProviderMetadataURL": "http://localhost:3220/auth/realms/master/protocol/saml/descriptor"
    },
    {
      // User login: alice@example.com / Miltonwoof1
      // Admin login: https://dev-433675-admin.oktapreview.com / beyang@sourcegraph.com / I3muNS06Ide6DjeZrIjC14Ua
      "type": "saml",
      "displayName": "Okta SAML (dev)",
      "identityProviderMetadataURL": "https://dev-433675.oktapreview.com/app/exkcgo5zoe8HqHBdH0h7/sso/saml/metadata"
    },
    {
      // User login: alice@example.com / Miltonwoof1
      // Admin login: https://dev-433675-admin.oktapreview.com / beyang@sourcegraph.com / I3muNS06Ide6DjeZrIjC14Ua
      "type": "openidconnect",
      "displayName": "Okta OpenID Connect (dev)",
      "issuer": "https://dev-433675.oktapreview.com",
      "clientID": "0oaevek08cpSUP6iX0h7",
      "clientSecret": "m7qQ-b0HePaXcj4hFYhTwKspNnyFRNBzTaYMFI7i"
    },
    {
      // User login: alice@example.com / Miltonwoof1
      // Admin login: https://sourcegraph-dev.onelogin.com / beyang@sourcegraph.com / Mtg&7gZMnirBVsyaeQTAjnzu
      "type": "saml",
      "displayName": "OneLogin SAML (dev)",
      "identityProviderMetadataURL": "https://sourcegraph-dev.onelogin.com/saml/metadata/736334",
      "serviceProviderCertificate": "$SAML_ONELOGIN_CERT",
      "serviceProviderPrivateKey": "$SAML_ONELOGIN_KEY"
    }
    // Uncomment to test ADFS SAML. See ../docs/saml-adfs.md for required configuration steps.
    //
    // {
    //   "type": "saml",
    //   "displayName": "Windows Server 2012 Datacenter ADFS 2.1 SAML (dev)",
    //   "identityProviderMetadataURL": "https://adfstest.sgdev.org/federationmetadata/2007-06/federationmetadata.xml"
    // }
  ]
}
