{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "site.schema.json#",
  "title": "Site configuration",
  "description": "Configuration for a Sourcegraph site.",
  "allowComments": true,
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "dontIncludeSymbolResultsByDefault": {
      "description": "Set to `true` to not include symbol results if no `type:` filter was given",
      "type": "boolean",
      "group": "Search"
    },
    "disableBuiltInSearches": {
      "description": "Whether built-in searches should be hidden on the Searches page.",
      "type": "boolean",
      "group": "Search"
    },
    "search.index.enabled": {
      "description": "Whether indexed search is enabled. If : unset Sourcegraph detects the environment to decide if indexed search is enabled. Indexed search is RAM heavy, and is disabled by default in the single docker image. All other environments will have it enabled by default. The size of all your repository working copies is the amount of additional RAM required.",
      "type": "boolean",
      "!go": { "pointer": true },
      "group": "Search"
    },
    "search.index.symbols.enabled": {
      "description": "Whether indexed symbol search is enabled. This is contingent on the indexed search configuration, and is true by default for instances with indexed search enabled. Enabling this will cause every repository to re-index, which is a time consuming (several hours) operation. Additionally, it requires more storage and ram to accommodate the added symbols information in the search index.",
      "type": "boolean",
      "!go": { "pointer": true },
      "group": "Search"
    },
    "search.largeFiles": {
      "description": "A list of file glob patterns where matching files will be indexed and searched regardless of their size. Files still need to be valid utf-8 to be indexed. The glob pattern syntax can be found here: https://github.com/bmatcuk/doublestar#patterns.",
      "type": "array",
      "items": {
        "type": "string"
      },
      "group": "Search",
      "examples": [["go.sum", "package-lock.json", "**/*.thrift"]]
    },
    "debug.search.symbolsParallelism": {
      "description": "(debug) controls the amount of symbol search parallelism. Defaults to 20. It is not recommended to change this outside of debugging scenarios. This option will be removed in a future version.",
      "type": "integer",
      "group": "Debug",
      "examples": [["20"]]
    },
    "apidocs.search.index-size-limit-factor": {
      "description": "Deprecated.",
      "type": "number",
      "default": 1.0,
      "additionalProperties": false
    },
    "cloneProgress.log": {
      "description": "Whether clone progress should be logged to a file. If enabled, logs are written to files in the OS default path for temporary files.",
      "type": "boolean",
      "default": false
    },
    "defaultRateLimit": {
      "description": "The rate limit (in requests per hour) for the default rate limiter in the rate limiters registry. By default this is disabled and the default rate limit is infinity.",
      "type": "number",
      "default": -1
    },
    "RedirectUnsupportedBrowser": {
      "description": "Prompts user to install new browser for non es5",
      "type": "boolean",
      "default": false
    },
    "exportUsageTelemetry": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "description": "Toggles whether or not to export Sourcegraph telemetry. If enabled events will be scraped and sent to an analytics store. This is an opt-in setting, and only should only be enabled for customers that have agreed to event level data collection.",
          "type": "boolean",
          "default": false,
          "deprecationMessage": "Deprecated in favor of an environment variable EXPORT_USAGE_DATA_ENABLED."
        },
        "batchSize": {
          "description": "Maximum number of events scraped from the events table in a single scrape.",
          "type": "integer",
          "default": 5000,
          "minimum": 1
        },
        "topicProjectName": {
          "type": "string",
          "description": "GCP project name containing the usage data pubsub topic",
          "deprecationMessage": "Deprecated in favor of an environment variable EXPORT_USAGE_DATA_TOPIC_PROJECT."
        },
        "topicName": {
          "type": "string",
          "description": "Destination pubsub topic name to export usage data",
          "deprecationMessage": "Deprecated in favor of an environment variable EXPORT_USAGE_DATA_TOPIC_NAME."
        }
      }
    },
    "auth.passwordPolicy": {
      "type": "object",
      "additionalProperties": false,
      "description": "Enables and configures password policy. This will allow admins to enforce password complexity and length requirements.",
      "properties": {
        "enabled": {
          "description": "Enables password policy",
          "type": "boolean",
          "default": false
        },
        "numberOfSpecialCharacters": {
          "description": "The required number of special characters",
          "type": "integer",
          "length": 2
        },
        "requireAtLeastOneNumber": {
          "description": "Does the password require a number",
          "type": "boolean",
          "default": true
        },
        "requireUpperandLowerCase": {
          "description": "Require Mixed characters",
          "type": "boolean",
          "default": true
        }
      }
    },
    "experimentalFeatures": {
      "description": "Experimental features to enable or disable. Features that are now enabled by default are marked as deprecated.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "rateLimitAnonymous": {
          "description": "Configures the hourly rate limits for anonymous calls to the GraphQL API. Setting limit to 0 disables the limiter. This is only relevant if unauthenticated calls to the API are permitted.",
          "type": "integer",
          "default": 500
        },
        "eventLogging": {
          "description": "Enables user event logging inside of the Sourcegraph instance. This will allow admins to have greater visibility of user activity, such as frequently viewed pages, frequent searches, and more. These event logs (and any specific user actions) are only stored locally, and never leave this Sourcegraph instance.",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "enabled"
        },
        "passwordPolicy": {
          "description": "DEPRECATED: this is now a standard feature see: auth.passwordPolicy",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "description": "Enables password policy",
              "type": "boolean",
              "default": true
            },
            "minimumLength": {
              "description": "DEPRECATED: replaced by auth.minPasswordLength",
              "type": "integer",
              "default": 12
            },
            "numberOfSpecialCharacters": {
              "description": "The required number of special characters",
              "type": "integer",
              "default": 2
            },
            "requireAtLeastOneNumber": {
              "description": "Does the password require a number",
              "type": "boolean",
              "default": true
            },
            "requireUpperandLowerCase": {
              "description": "Require Mixed characters",
              "type": "boolean",
              "default": true
            }
          }
        },
        "debug.log": {
          "description": "Turns on debug logging for specific debugging scenarios.",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "extsvc.gitlab": {
              "description": "Log GitLab API requests.",
              "type": "boolean",
              "default": false
            }
          }
        },
        "apidocs.search.indexing": {
          "description": "Deprecated.",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "enabled"
        },
        "structuralSearch": {
          "description": "Enables structural search.",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "enabled"
        },
        "andOrQuery": {
          "description": "DEPRECATED: Interpret a search input query as an and/or query.",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "enabled"
        },
        "bitbucketServerFastPerm": {
          "description": "DEPRECATED: Configure in Bitbucket Server config.",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "disabled"
        },
        "searchMultipleRevisionsPerRepository": {
          "description": "DEPRECATED. Always on. Will be removed in 3.19.",
          "type": "boolean",
          "default": false,
          "!go": { "pointer": true }
        },
        "perforce": {
          "description": "Allow adding Perforce code host connections",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "enabled"
        },
        "goPackages": {
          "description": "Allow adding Go package host connections",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "disabled"
        },
        "jvmPackages": {
          "description": "Allow adding JVM package host connections",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "disabled"
        },
        "npmPackages": {
          "description": "Allow adding npm package code host connections",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "disabled"
        },
        "pythonPackages": {
          "description": "Allow adding Python package code host connections",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "disabled"
        },
        "rustPackages": {
          "description": "Allow adding Rust package code host connections",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "disabled"
        },
        "pagure": {
          "description": "Allow adding Pagure code host connections",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "disabled"
        },
        "gerrit": {
          "description": "Allow adding Gerrit code host connections",
          "type": "string",
          "enum": ["enabled", "disabled"],
          "default": "disabled"
        },
        "subRepoPermissions": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "description": "Enables sub-repo permission checking",
              "type": "boolean",
              "default": false
            },
            "userCacheSize": {
              "description": "The number of user permissions to cache",
              "type": "integer",
              "default": 1000,
              "minimum": 1
            },
            "userCacheTTLSeconds": {
              "description": "The TTL in seconds for cached user permissions",
              "type": "integer",
              "default": 10,
              "minimum": 1
            }
          }
        },
        "tls.external": {
          "description": "Global TLS/SSL settings for Sourcegraph to use when communicating with code hosts.",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "insecureSkipVerify": {
              "description": "insecureSkipVerify controls whether a client verifies the server's certificate chain and host name.\nIf InsecureSkipVerify is true, TLS accepts any certificate presented by the server and any host name in that certificate. In this mode, TLS is susceptible to man-in-the-middle attacks.",
              "type": "boolean",
              "default": false
            },
            "certificates": {
              "description": "TLS certificates to accept. This is only necessary if you are using self-signed certificates or an internal CA. Can be an internal CA certificate or a self-signed certificate. To get the certificate of a webserver run `openssl s_client -connect HOST:443 -showcerts < /dev/null 2> /dev/null | openssl x509 -outform PEM`. To escape the value into a JSON string, you may want to use a tool like https://json-escape-text.now.sh. NOTE: git will only respect these certificates and will ignore system certificates. Remember to include system certificates in this setting.",
              "type": "array",
              "items": {
                "type": "string",
                "pattern": "^-----BEGIN CERTIFICATE-----\n",
                "examples": ["-----BEGIN CERTIFICATE-----\n..."]
              }
            }
          }
        },
        "customGitFetch": {
          "description": "JSON array of configuration that maps from Git clone URL domain/path to custom git fetch command.",
          "type": "array",
          "items": {
            "title": "CustomGitFetchMapping",
            "description": "Mapping from Git clone URl domain/path to git fetch command. The `domainPath` field contains the Git clone URL domain/path part. The `fetch` field contains the custom git fetch command.",
            "type": "object",
            "additionalProperties": false,
            "required": ["domainPath", "fetch"],
            "properties": {
              "domainPath": {
                "description": "Git clone URL domain/path",
                "type": "string"
              },
              "fetch": {
                "description": "Git fetch command",
                "type": "string",
                "minLength": 1
              }
            }
          },
          "examples": [
            [
              {
                "domainPath": "somecodehost.com/path/to/repo",
                "fetch": "customgitbinary someflag"
              },
              {
                "domainPath": "somecodehost.com/path/to/anotherrepo",
                "fetch": "customgitbinary someflag anotherflag"
              }
            ]
          ]
        },
        "search.index.revisions": {
          "description": "An array of objects describing rules for extra revisions (branch, ref, tag, commit sha, etc) to be indexed for all repositories that match them. We always index the default branch (\"HEAD\") and revisions in version contexts. This allows specifying additional revisions. Sourcegraph can index up to 64 branches per repository.",
          "type": "array",
          "items": {
            "type": "object",
            "title": "SearchIndexRevisionsRule",
            "additionalProperties": false,
            "required": ["revisions"],
            "anyOf": [{ "required": ["name"] }],
            "properties": {
              "name": {
                "description": "Regular expression which matches against the name of a repository (e.g. \"^github\\.com/owner/name$\").",
                "type": "string",
                "format": "regex"
              },
              "revisions": {
                "description": "Revisions to index",
                "type": "array",
                "items": {
                  "type": "string",
                  "minLength": 1
                }
              }
            }
          },
          "examples": [
            [
              {
                "name": "^github.com/org/.*",
                "revisions": ["3.17", "f6ca985c27486c2df5231ea3526caa4a4108ffb6", "v3.17.1"]
              }
            ]
          ]
        },
        "search.index.branches": {
          "description": "A map from repository name to a list of extra revs (branch, ref, tag, commit sha, etc) to index for a repository. We always index the default branch (\"HEAD\") and revisions in version contexts. This allows specifying additional revisions. Sourcegraph can index up to 64 branches per repository.",
          "type": "object",
          "additionalProperties": {
            "type": "array",
            "items": { "type": "string" },
            "maxItems": 64
          },
          "examples": [
            {
              "github.com/sourcegraph/sourcegraph": ["3.17", "f6ca985c27486c2df5231ea3526caa4a4108ffb6", "v3.17.1"],
              "name/of/repo": ["develop"]
            }
          ]
        },
        "search.index.query.contexts": {
          "description": "Enables indexing of revisions of repos matching any query defined in search contexts.",
          "type": "boolean",
          "default": false
        },
        "versionContexts": {
          "description": "DEPRECATED: Use search contexts instead.\n\nJSON array of version context configuration",
          "type": "array",
          "items": {
            "title": "VersionContext",
            "description": "Configuration of the version context",
            "type": "object",
            "additionalProperties": false,
            "required": ["name", "revisions"],
            "properties": {
              "name": {
                "description": "Name of the version context, it must be unique.",
                "type": "string",
                "minLength": 1,
                "maxLength": 50
              },
              "revisions": {
                "description": "List of repositories of the version context",
                "type": "array",
                "items": {
                  "title": "VersionContextRevision",
                  "description": "Description of the chosen repository and revision",
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["repo", "rev"],
                  "properties": {
                    "repo": {
                      "description": "Repository name",
                      "type": "string"
                    },
                    "rev": {
                      "description": "Branch, tag, or commit hash. \"HEAD\" or \"\" can be used for the default branch.",
                      "type": "string"
                    }
                  }
                }
              },
              "description": {
                "description": "Description of the version context",
                "type": "string"
              }
            }
          },
          "examples": [
            {
              "name": "Release foo",
              "revisions": [
                {
                  "repo": "github.com/sourcegraph/sourcegraph",
                  "rev": "3.15"
                },
                {
                  "repo": "github.com/sourcegraph/lib1",
                  "rev": "23edr233r"
                },
                {
                  "repo": "github.com/sourcegraph/lib2",
                  "rev": "2.4"
                }
              ]
            }
          ]
        },
        "enableWebhookRepoSync": {
          "description": "Enable webhooks for repo syncing",
          "type": "boolean",
          "default": false,
          "!go": { "pointer": false }
        },
        "enablePermissionsWebhooks": {
          "description": "Enables webhook consumers to sync permissions from external services faster than the defaults schedule",
          "type": "boolean",
          "default": false,
          "!go": { "pointer": false }
        },
        "enablePostSignupFlow": {
          "description": "Enables post sign-up user flow to add code hosts and sync code",
          "type": "boolean",
          "default": false,
          "!go": { "pointer": false }
        },
        "ranking": {
          "description": "Experimental search result ranking options.",
          "type": "object",
          "properties": {
            "repoScores": {
              "description": "a map of URI directories to numeric scores for specifying search result importance, like {\"github.com\": 500, \"github.com/sourcegraph\": 300, \"github.com/sourcegraph/sourcegraph\": 100}. Would rank \"github.com/sourcegraph/sourcegraph\" as 500+300+100=900, and \"github.com/other/foo\" as 500.",
              "type": "object",
              "default": {},
              "group": "Search",
              "additionalProperties": {
                "type": "number"
              }
            },
            "maxReorderQueueSize": {
              "description": "The maximum number of search results that can be buffered to sort results. -1 is unbounded. The default is 24. Set this to small integers to limit latency increases from slow backends.",
              "default": 24,
              "type": "integer",
              "group": "Search",
              "!go": { "pointer": true }
            },
            "maxReorderDurationMS": {
              "description": "The maximum time in milliseconds we wait until we flush the results queue. The default is 0 (unbounded). The larger the value the more stable the ranking and the higher the MEM pressure on frontend.",
              "type": "integer",
              "default": 0,
              "group": "Search"
            }
          }
        },
        "enableGithubInternalRepoVisibility": {
          "description": "Enable support for visilibity of internal Github repositories",
          "type": "boolean",
          "default": false
        },
        "enableGitServerCommandExecFilter": {
          "description": "DEPRECATED: Setting any value to this flag has no effect.",
          "type": "boolean",
          "default": true
        },
        "gitServerPinnedRepos": {
          "description": "List of repositories pinned to specific gitserver instances. The specified repositories will remain at their pinned servers on scaling the cluster. If the specified pinned server differs from the current server that stores the repository, then it must be re-cloned to the specified server.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "examples": [
            {
              "github.com/foo/bar": "gitserverHostname",
              "github.com/foo/bar2": "gitserverHostname2"
            }
          ]
        },
        "enableLegacyExtensions": {
          "description": "Enable the extension registry and the use of extensions (doesn't affect code intel and git extras).",
          "type": "boolean",
          "default": true,
          "!go": { "pointer": true }
        }
      },
      "examples": [
        {
          "customGitFetch": [
            {
              "domainPath": "somecodehost.com/path/to/repo",
              "fetch": "customgitbinary someflag"
            },
            {
              "domainPath": "somecodehost.com/path/to/anotherrepo",
              "fetch": "customgitbinary someflag anotherflag"
            }
          ]
        },
        {
          "tls.external": {
            "certificates": ["-----BEGIN CERTIFICATE-----\n..."],
            "insecureSkipVerify": true
          }
        }
      ],
      "group": "Experimental"
    },
    "campaigns.enabled": {
      "description": "DEPRECATED: Use batchChanges.enabled instead. This setting is non-functional.",
      "type": "boolean",
      "!go": { "pointer": true },
      "group": "Campaigns",
      "default": true
    },
    "campaigns.restrictToAdmins": {
      "description": "DEPRECATED: Use batchChanges.restrictToAdmins instead. This setting is non-functional.",
      "type": "boolean",
      "!go": { "pointer": true },
      "group": "Campaigns",
      "default": false
    },
    "batchChanges.enabled": {
      "description": "Enables/disables the Batch Changes feature.",
      "type": "boolean",
      "!go": { "pointer": true },
      "group": "BatchChanges",
      "default": true
    },
    "batchChanges.enforceForks": {
      "description": "When enabled, all branches created by batch changes will be pushed to forks of the original repository.",
      "type": "boolean",
      "group": "BatchChanges",
      "default": false
    },
    "batchChanges.restrictToAdmins": {
      "description": "When enabled, only site admins can create and apply batch changes.",
      "type": "boolean",
      "!go": { "pointer": true },
      "group": "BatchChanges",
      "default": false
    },
    "batchChanges.rolloutWindows": {
      "description": "Specifies specific windows, which can have associated rate limits, to be used when publishing changesets. All days and times are handled in UTC.",
      "type": "array",
      "!go": { "pointer": true },
      "group": "BatchChanges",
      "items": {
        "title": "BatchChangeRolloutWindow",
        "type": "object",
        "required": ["rate"],
        "additionalProperties": false,
        "properties": {
          "rate": {
            "description": "The rate changesets will be published at.",
            "oneOf": [
              { "type": "number", "minimum": 0, "maximum": 0 },
              {
                "type": "string",
                "pattern": "^(unlimited|[0-9]+\\/(sec|secs|second|seconds|min|mins|minute|minutes|hr|hrs|hour|hours))$"
              }
            ]
          },
          "start": {
            "description": "Window start time. If omitted, no time window is applied to the day(s) that match this rule.",
            "type": "string",
            "pattern": "^[0-9]?[0-9]:[0-9]{2}$"
          },
          "end": {
            "description": "Window end time. If omitted, no time window is applied to the day(s) that match this rule.",
            "type": "string",
            "pattern": "^[0-9]?[0-9]:[0-9]{2}$"
          },
          "days": {
            "description": "Day(s) the window applies to. If omitted, this rule applies to all days of the week.",
            "type": "array",
            "items": {
              "type": "string",
              "pattern": "^([mM]on(day)?|[tT]ue(s|sday)?|[wW]ed(nesday)?|[tT]hu(r|rs|rsday)?|[fF]ri(day)?|[sS]at(urday)?|[sS]un(day)?)$"
            }
          }
        },
        "dependencies": {
          "start": ["end"]
        }
      }
    },
    "batchChanges.disableWebhooksWarning": {
      "description": "Hides Batch Changes warnings about webhooks not being configured.",
      "type": "boolean",
      "group": "BatchChanges",
      "default": false
    },
    "batchChanges.changesetsRetention": {
      "description": "How long changesets will be retained after they have been detached from a batch change.",
      "type": "string",
      "group": "BatchChanges",
      "examples": ["336h", "48h", "5h30m40s"]
    },
    "codeIntelAutoIndexing.enabled": {
      "description": "Enables/disables the code intel auto-indexing feature. Currently experimental.",
      "type": "boolean",
      "!go": { "pointer": true },
      "group": "Code intelligence",
      "default": false
    },
    "codeIntelAutoIndexing.policyRepositoryMatchLimit": {
      "description": "The maximum number of repositories to which a single auto-indexing policy can apply. Default is -1, which is unlimited.",
      "type": "integer",
      "!go": { "pointer": true },
      "group": "Code intelligence",
      "default": -1
    },
    "codeIntelAutoIndexing.allowGlobalPolicies": {
      "description": "Whether auto-indexing policies may apply to all repositories on the Sourcegraph instance. Default is false. The policyRepositoryMatchLimit setting still applies to such auto-indexing policies.",
      "type": "boolean",
      "!go": { "pointer": true },
      "group": "Code intelligence",
      "default": false
    },
    "codeIntelLockfileIndexing.enabled": {
      "description": "DEPRECATED: Enables/disables the code intel lockfile-indexing feature. Currently experimental.",
      "type": "boolean",
      "!go": { "pointer": true },
      "group": "Code intelligence",
      "default": false
    },
    "corsOrigin": {
      "description": "Required when using any of the native code host integrations for Phabricator, GitLab, or Bitbucket Server. It is a space-separated list of allowed origins for cross-origin HTTP requests which should be the base URL for your Phabricator, GitLab, or Bitbucket Server instance.",
      "type": "string",
      "examples": ["https://my-phabricator.example.com https://my-bitbucket.example.com https://my-gitlab.example.com"],
      "pattern": "^((https?:\\/\\/[\\w-\\.]+)( https?:\\/\\/[\\w-\\.]+)*)|\\*$",
      "group": "Security"
    },
    "lsifEnforceAuth": {
      "description": "Whether or not LSIF uploads will be blocked unless a valid LSIF upload token is provided.",
      "type": "boolean",
      "default": false,
      "group": "Security"
    },
    "disableNonCriticalTelemetry": {
      "description": "Disable aggregated event counts from being sent to Sourcegraph.com via pings.",
      "type": "boolean",
      "default": false,
      "group": "Misc."
    },
    "disableAutoGitUpdates": {
      "description": "Disable periodically fetching git contents for existing repositories.",
      "type": "boolean",
      "default": false,
      "group": "External services"
    },
    "disableAutoCodeHostSyncs": {
      "description": "Disable periodic syncs of configured code host connections (repository metadata, permissions, batch changes changesets, etc)",
      "type": "boolean",
      "default": false,
      "group": "External services"
    },
    "gitUpdateInterval": {
      "description": "JSON array of repo name patterns and update intervals. If a repo matches a pattern, the associated interval will be used. If it matches no patterns a default backoff heuristic will be used. Pattern matches are attempted in the order they are provided.",
      "type": "array",
      "items": {
        "title": "UpdateIntervalRule",
        "type": "object",
        "required": ["pattern", "interval"],
        "additionalProperties": false,
        "properties": {
          "pattern": {
            "description": "A regular expression matching a repo name",
            "type": "string",
            "minLength": 1
          },
          "interval": {
            "description": "An integer representing the number of minutes to wait until the next update",
            "type": "integer",
            "minimum": 1
          }
        }
      },
      "group": "External services"
    },
    "disablePublicRepoRedirects": {
      "description": "Disable redirects to sourcegraph.com when visiting public repositories that can't exist on this server.",
      "type": "boolean",
      "group": "External services"
    },
    "git.cloneURLToRepositoryName": {
      "description": "JSON array of configuration that maps from Git clone URL to repository name. Sourcegraph automatically resolves remote clone URLs to their proper code host. However, there may be non-remote clone URLs (e.g., in submodule declarations) that Sourcegraph cannot automatically map to a code host. In this case, use this field to specify the mapping. The mappings are tried in the order they are specified and take precedence over automatic mappings.",
      "type": "array",
      "items": {
        "title": "CloneURLToRepositoryName",
        "description": "Describes a mapping from clone URL to repository name. The `from` field contains a regular expression with named capturing groups. The `to` field contains a template string that references capturing group names. For instance, if `from` is \"^../(?P<name>\\w+)$\" and `to` is \"github.com/user/{name}\", the clone URL \"../myRepository\" would be mapped to the repository name \"github.com/user/myRepository\".",
        "type": "object",
        "additionalProperties": false,
        "required": ["from", "to"],
        "properties": {
          "from": {
            "description": "A regular expression that matches a set of clone URLs. The regular expression should use the Go regular expression syntax (https://golang.org/pkg/regexp/) and contain at least one named capturing group. The regular expression matches partially by default, so use \"^...$\" if whole-string matching is desired.",
            "type": "string"
          },
          "to": {
            "description": "The repository name output pattern. This should use `{matchGroup}` syntax to reference the capturing groups from the `from` field.",
            "type": "string"
          }
        }
      },
      "group": "External services"
    },
    "githubClientID": {
      "description": "Client ID for GitHub. (DEPRECATED)",
      "type": "string",
      "group": "Internal",
      "hide": true
    },
    "githubClientSecret": {
      "description": "Client secret for GitHub. (DEPRECATED)",
      "type": "string",
      "group": "Internal",
      "hide": true
    },
    "gitLongCommandTimeout": {
      "description": "Maximum number of seconds that a long Git command (e.g. clone or remote update) is allowed to execute. The default is 3600 seconds, or 1 hour.",
      "type": "integer",
      "default": 3600,
      "group": "External services"
    },
    "gitMaxConcurrentClones": {
      "description": "Maximum number of git clone processes that will be run concurrently per gitserver to update repositories. Note: the global git update scheduler respects gitMaxConcurrentClones. However, we allow each gitserver to run upto gitMaxConcurrentClones to allow for urgent fetches. Urgent fetches are used when a user is browsing a PR and we do not have the commit yet.",
      "type": "integer",
      "default": 5,
      "group": "External services"
    },
    "gitMaxCodehostRequestsPerSecond": {
      "description": "Maximum number of remote code host git operations (e.g. clone or ls-remote) to be run per second per gitserver. Default is -1, which is unlimited.",
      "type": "integer",
      "!go": { "pointer": true },
      "default": -1,
      "group": "External services"
    },
    "syntaxHighlighting": {
      "title": "SyntaxHighlighting",
      "description": "Syntax highlighting configuration",
      "type": "object",
      "required": ["engine", "languages"],
      "properties": {
        "engine": {
          "title": "SyntaxHighlightingEngine",
          "type": "object",
          "required": ["default"],
          "properties": {
            "default": {
              "description": "The default syntax highlighting engine to use",
              "type": "string",
              "enum": ["tree-sitter", "syntect"]
            },
            "overrides": {
              "description": "Manually specify overrides for syntax highlighting engine per language",
              "type": "object",
              "additionalProperties": { "type": "string", "enum": ["tree-sitter", "syntect"] }
            }
          }
        },
        "languages": {
          "title": "SyntaxHighlightingLanguage",
          "type": "object",
          "required": ["extensions", "patterns"],
          "properties": {
            "extensions": {
              "description": "Map of extension to language",
              "type": "object",
              "additionalProperties": { "type": "string" }
            },
            "patterns": {
              "description": "Map of patterns to language. Will return after first match, if any.",
              "type": "array",
              "items": {
                "title": "SyntaxHighlightingLanguagePatterns",
                "type": "object",
                "required": ["pattern", "language"],
                "properties": {
                  "pattern": {
                    "description": "Regular expression which matches the filepath",
                    "type": "string",
                    "format": "regex"
                  },
                  "language": {
                    "description": "Name of the language if pattern matches",
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "repoListUpdateInterval": {
      "description": "Interval (in minutes) for checking code hosts (such as GitHub, Gitolite, etc.) for new repositories.",
      "type": "integer",
      "default": 1,
      "group": "External services"
    },
    "repoConcurrentExternalServiceSyncers": {
      "description": "The number of concurrent external service syncers that can run.",
      "type": "integer",
      "default": 3,
      "group": "External services"
    },
    "maxReposToSearch": {
      "description": "DEPRECATED: Configure maxRepos in search.limits. The maximum number of repositories to search across. The user is prompted to narrow their query if exceeded. Any value less than or equal to zero means unlimited.",
      "type": "integer",
      "default": -1,
      "group": "Search"
    },
    "search.limits": {
      "description": "Limits that search applies for number of repositories searched and timeouts.",
      "type": "object",
      "group": "Search",
      "additionalProperties": false,
      "properties": {
        "maxTimeoutSeconds": {
          "description": "The maximum value for \"timeout:\" that search will respect. \"timeout:\" values larger than maxTimeoutSeconds are capped at maxTimeoutSeconds. Note: You need to ensure your load balancer / reverse proxy in front of Sourcegraph won't timeout the request for larger values. Note: Too many large rearch requests may harm Soucregraph for other users. Defaults to 1 minute.",
          "type": "integer",
          "default": "60",
          "minimum": 1
        },
        "maxRepos": {
          "description": "The maximum number of repositories to search across. The user is prompted to narrow their query if exceeded. Any value less than or equal to zero means unlimited.",
          "type": "integer",
          "default": -1
        },
        "commitDiffMaxRepos": {
          "description": "The maximum number of repositories to search across when doing a \"type:diff\" or \"type:commit\". The user is prompted to narrow their query if the limit is exceeded. There is a separate limit (commitDiffWithTimeFilterMaxRepos) when \"after:\" or \"before:\" is specified because those queries are faster. Defaults to 50.",
          "type": "integer",
          "default": 50,
          "minimum": 1
        },
        "commitDiffWithTimeFilterMaxRepos": {
          "description": "The maximum number of repositories to search across when doing a \"type:diff\" or \"type:commit\" with a \"after:\" or \"before:\" filter. The user is prompted to narrow their query if the limit is exceeded. There is a separate limit (commitDiffMaxRepos) when \"after:\" or \"before:\" is not specified because those queries are slower. Defaults to 10000.",
          "type": "integer",
          "default": 10000,
          "minimum": 1
        }
      }
    },
    "parentSourcegraph": {
      "description": "URL to fetch unreachable repository details from. Defaults to \"https://sourcegraph.com\"",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "url": {
          "type": "string",
          "default": "https://sourcegraph.com"
        }
      },
      "group": "External services"
    },
    "auth.accessTokens": {
      "description": "Settings for access tokens, which enable external tools to access the Sourcegraph API with the privileges of the user.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "allow": {
          "description": "Allow or restrict the use of access tokens. The default is \"all-users-create\", which enables all users to create access tokens. Use \"none\" to disable access tokens entirely. Use \"site-admin-create\" to restrict creation of new tokens to admin users (existing tokens will still work until revoked).",
          "type": "string",
          "enum": ["all-users-create", "site-admin-create", "none"],
          "default": "all-users-create"
        }
      },
      "default": {
        "allow": "all-users-create"
      },
      "examples": [
        {
          "allow": "site-admin-create"
        },
        { "allow": "none" }
      ],
      "group": "Security"
    },
    "authz.enforceForSiteAdmins": {
      "description": "When true, site admins will only be able to see private code they have access to via our authz system.",
      "type": "boolean",
      "default": false
    },
    "authz.refreshInterval": {
      "description": "Time interval (in seconds) of how often each component picks up authorization changes in external services.",
      "type": "integer",
      "default": 5
    },
    "externalService.userMode": {
      "description": "Enable to allow users to add external services for public and private repositories to the Sourcegraph instance.",
      "type": "string",
      "enum": ["public", "disabled", "all"],
      "default": "disabled"
    },
    "permissions.userMapping": {
      "description": "Settings for Sourcegraph permissions, which allow the site admin to explicitly manage repository permissions via the GraphQL API. This setting cannot be enabled if repository permissions for any specific external service are enabled (i.e., when the external service's `authorization` field is set).",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "description": "Whether permissions user mapping is enabled. There must be no `authorization` field in any external service configuration before enabling this.",
          "type": "boolean",
          "default": false
        },
        "bindID": {
          "description": "The type of identifier to identify a user. The default is \"email\", which uses the email address to identify a user. Use \"username\" to identify a user by their username. Changing this setting will erase any permissions created for users that do not yet exist.",
          "type": "string",
          "enum": ["email", "username"],
          "default": "email"
        }
      },
      "default": {
        "enabled": true,
        "bindID": "email"
      },
      "examples": [{ "bindID": "email" }, { "bindID": "username" }],
      "group": "Security"
    },
    "permissions.syncScheduleInterval": {
      "description": "Time interval (in seconds) of how often each component picks up authorization changes in external services.",
      "type": "integer",
      "default": 15
    },
    "permissions.syncOldestUsers": {
      "description": "Number of user permissions to schedule for syncing in single scheduler iteration.",
      "type": "integer",
      "default": 10
    },
    "permissions.syncOldestRepos": {
      "description": "Number of repo permissions to schedule for syncing in single scheduler iteration.",
      "type": "integer",
      "default": 10
    },
    "permissions.syncUsersBackoffSeconds": {
      "description": "Don't sync a user's permissions if they have synced within the last n seconds.",
      "type": "integer",
      "default": 60
    },
    "permissions.syncReposBackoffSeconds": {
      "description": "Don't sync a repo's permissions if it has synced within the last n seconds.",
      "type": "integer",
      "default": 60
    },
    "permissions.syncUsersMaxConcurrency": {
      "description": "The maximum number of user-centric permissions syncing jobs that can be spawned concurrently. Service restart is required to take effect for changes.",
      "type": "integer",
      "default": 1
    },
    "branding": {
      "description": "Customize Sourcegraph homepage logo and search icon.\n\nOnly available in Sourcegraph Enterprise.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "light": {
          "$ref": "#/definitions/BrandAssets"
        },
        "dark": {
          "$ref": "#/definitions/BrandAssets"
        },
        "favicon": {
          "description": "The URL of the favicon to be used for your instance. We recommend using the following file format: ICO",
          "type": "string",
          "format": "uri"
        },
        "disableSymbolSpin": {
          "description": "Prevents the icon in the top-left corner of the screen from spinning on hover.",
          "type": "boolean",
          "default": false
        },
        "brandName": {
          "description": "String to display everywhere the brand name should be displayed. Defaults to \"Sourcegraph\"",
          "type": "string",
          "default": "Sourcegraph"
        }
      },
      "examples": [
        {
          "favicon": "https://example.com/favicon.ico",
          "light": {
            "logo": "https://example.com/logo_light.png",
            "symbol": "https://example.com/search_symbol_light_24x24.png"
          },
          "dark": {
            "logo": "https://example.com/logo_dark.png",
            "symbol": "https://example.com/search_symbol_dark_24x24.png"
          },
          "disableSymbolSpin": true
        }
      ]
    },
    "email.smtp": {
      "title": "SMTPServerConfig",
      "description": "The SMTP server used to send transactional emails.\nPlease see https://docs.sourcegraph.com/admin/config/email",
      "type": "object",
      "additionalProperties": false,
      "required": ["host", "port", "authentication"],
      "properties": {
        "host": {
          "description": "The SMTP server host.",
          "type": "string"
        },
        "port": {
          "description": "The SMTP server port.",
          "type": "integer"
        },
        "username": {
          "description": "The username to use when communicating with the SMTP server.",
          "type": "string"
        },
        "password": {
          "description": "The password to use when communicating with the SMTP server.",
          "type": "string"
        },
        "authentication": {
          "description": "The type of authentication to use for the SMTP server.",
          "type": "string",
          "enum": ["none", "PLAIN", "CRAM-MD5"]
        },
        "domain": {
          "description": "The HELO domain to provide to the SMTP server (if needed).",
          "type": "string"
        },
        "noVerifyTLS": {
          "description": "Disable TLS verification",
          "type": "boolean"
        }
      },
      "default": null,
      "examples": [
        {
          "host": "smtp.example.com",
          "port": 465,
          "username": "alice",
          "password": "mypassword",
          "authentication": "PLAIN"
        }
      ],
      "group": "Email"
    },
    "email.address": {
      "description": "The \"from\" address for emails sent by this server.\nPlease see https://docs.sourcegraph.com/admin/config/email",
      "type": "string",
      "format": "email",
      "group": "Email",
      "default": "noreply@sourcegraph.com"
    },
    "executors.frontendURL": {
      "description": "The frontend URL for Sourcegraph. Only root URLs are allowed. If not set, falls back to externalURL",
      "type": "string",
      "examples": ["https://sourcegraph.example.com"]
    },
    "executors.accessToken": {
      "description": "The shared secret between Sourcegraph and executors.",
      "type": "string",
      "minLength": 20
    },
    "extensions": {
      "description": "Configures Sourcegraph extensions.",
      "type": "object",
      "properties": {
        "disabled": {
          "description": "Disable all usage of extensions.",
          "type": "boolean",
          "default": false,
          "!go": { "pointer": true }
        },
        "remoteRegistry": {
          "description": "The remote extension registry URL, or `false` to not use a remote extension registry. If not set, the default remote extension registry URL is used.",
          "oneOf": [
            { "type": "string", "format": "uri" },
            { "type": "boolean", "const": false }
          ]
        },
        "allowRemoteExtensions": {
          "description": "Allow only the explicitly listed remote extensions (by extension ID, such as \"alice/myextension\") from the remote registry. If not set, all remote extensions may be used from the remote registry. To completely disable the remote registry, set `remoteRegistry` to `false`.\n\nOnly available in Sourcegraph Enterprise.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "allowOnlySourcegraphAuthoredExtensions": {
          "description": "Allow only Sourcegraph authored extensions from the default remote registry. If not set, all remote extensions may be used from the remote registry. If certain extensions are marked as allowed in `allowRemoteExtensions` field or `remoteRegistry` points to other than default registry, `allowOnlySourcegraphAuthoredExtensions` setting value will be ignored. To completely disable the remote registry, set `remoteRegistry` to `false`.",
          "type": "boolean",
          "default": false
        }
      },
      "default": {
        "remoteRegistry": "https://sourcegraph.com/.api/registry"
      },
      "examples": [
        {
          "remoteRegistry": "https://sourcegraph.com/.api/registry",
          "allowRemoteExtensions": ["sourcegraph/java"]
        }
      ],
      "group": "Extensions"
    },
    "auth.userOrgMap": {
      "description": "Ensure that matching users are members of the specified orgs (auto-joining users to the orgs if they are not already a member). Provide a JSON object of the form `{\"*\": [\"org1\", \"org2\"]}`, where org1 and org2 are orgs that all users are automatically joined to. Currently the only supported key is `\"*\"`.",
      "type": "object",
      "additionalProperties": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "examples": [{ "*": ["myorg1"] }],
      "hide": true
    },
    "log": {
      "description": "Configuration for logging and alerting, including to external services.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "sentry": {
          "description": "Configuration for Sentry",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "dsn": {
              "description": "Sentry Data Source Name (DSN). Per the Sentry docs (https://docs.sentry.io/quickstart/#about-the-dsn), it should match the following pattern: '{PROTOCOL}://{PUBLIC_KEY}@{HOST}/{PATH}{PROJECT_ID}'.",
              "type": "string",
              "pattern": "^https?://"
            },
            "backendDSN": {
              "description": "Sentry Data Source Name (DSN) for backend errors. Per the Sentry docs (https://docs.sentry.io/quickstart/#about-the-dsn), it should match the following pattern: '{PROTOCOL}://{PUBLIC_KEY}@{HOST}/{PATH}{PROJECT_ID}'.",
              "type": "string",
              "pattern": "^https?://"
            },
            "codeIntelDSN": {
              "description": "Sentry Data Source Name (DSN) for code intel errors. Per the Sentry docs (https://docs.sentry.io/quickstart/#about-the-dsn), it should match the following pattern: '{PROTOCOL}://{PUBLIC_KEY}@{HOST}/{PATH}{PROJECT_ID}'.",
              "type": "string",
              "pattern": "^https?://"
            }
          }
        },
        "gitserver.accessLogs": {
          "description": "Enable gitserver access logging.",
          "type": "boolean",
          "default": false
        }
      }
    },
    "externalURL": {
      "description": "The externally accessible URL for Sourcegraph (i.e., what you type into your browser). Previously called `appURL`. Only root URLs are allowed.",
      "type": "string",
      "examples": ["https://sourcegraph.example.com"]
    },
    "observability.client": {
      "description": "EXPERIMENTAL: Configuration for client observability",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "openTelemetry": {
          "description": "Configuration for the client OpenTelemetry exporter",
          "type": "object",
          "properties": {
            "endpoint": {
              "description": "OpenTelemetry tracing collector endpoint. By default, Sourcegraph's \"/-/debug/otlp\" endpoint forwards data to the configured collector backend.",
              "type": "string",
              "examples": ["/-/debug/otlp", "https://COLLECTOR_ENDPOINT"],
              "default": "/-/debug/otlp"
            }
          }
        }
      }
    },
    "observability.tracing": {
      "description": "Configures distributed tracing within Sourcegraph. To learn more, refer to https://docs.sourcegraph.com/admin/observability/tracing",
      "type": "object",
      "properties": {
        "sampling": {
          "description": "Determines the conditions under which distributed traces are recorded. \"none\" turns off tracing entirely. \"selective\" (default) sends traces whenever `?trace=1` is present in the URL (though background jobs may still emit traces). \"all\" sends traces on every request. Note that this only affects the behavior of the distributed tracing client. To learn more about additional sampling and traace export configuration with the default tracing type \"opentelemetry\", refer to https://docs.sourcegraph.com/admin/observability/opentelemetry#tracing ",
          "type": "string",
          "enum": ["selective", "all", "none"],
          "default": "selective"
        },
        "type": {
          "description": "Determines what tracing provider to enable. For \"opentelemetry\", the required backend is an OpenTelemetry collector instance (deployed by default with Sourcegraph). For \"jaeger\", a Jaeger instance is required to be configured via Jaeger client environment variables: https://github.com/jaegertracing/jaeger-client-go#environment-variables",
          "type": "string",
          "enum": ["opentelemetry", "jaeger"],
          "default": "opentelemetry"
        },
        "debug": {
          "description": "Turns on debug logging of tracing client requests. This can be useful for debugging connectivity issues between the tracing client and tracing backend, the performance overhead of tracing, and other issues related to the use of distributed tracing. May have performance implications in production.",
          "type": "boolean",
          "default": false
        },
        "urlTemplate": {
          "description": "Template for linking to trace URLs - '{{ .TraceID }}' is replaced with the trace ID, and {{ .ExternalURL }} is replaced with the value of 'externalURL'. If none is set, no links are generated.",
          "type": "string",
          "examples": [
            "https://ui.honeycomb.io/$ORG/environments/$DATASET/trace?trace_id={{ .TraceID }}",
            "https://console.cloud.google.com/traces/list?tid={{ .TraceID }}&project=$PROJECT",
            "https://$ORGANIZATION.grafana.net/explore?orgId=1&left=[\"now-1h\",\"now\",\"$DATASOURCE\",{\"query\":\"{{ .TraceID }}\",\"queryType\":\"traceId\"}]",
            "{{ .ExternalURL }}/-/debug/jaeger/trace/{{ .TraceID }}"
          ]
        }
      }
    },
    "observability.alerts": {
      "description": "Configure notifications for Sourcegraph's built-in alerts.",
      "type": "array",
      "items": {
        "type": "object",
        "required": ["level", "notifier"],
        "properties": {
          "level": {
            "description": "Sourcegraph alert level to subscribe to notifications for.",
            "type": "string",
            "enum": ["warning", "critical"]
          },
          "notifier": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": ["slack", "pagerduty", "webhook", "email", "opsgenie"]
              }
            },
            "oneOf": [
              { "$ref": "#/definitions/NotifierSlack" },
              { "$ref": "#/definitions/NotifierPagerduty" },
              { "$ref": "#/definitions/NotifierWebhook" },
              { "$ref": "#/definitions/NotifierEmail" },
              { "$ref": "#/definitions/NotifierOpsGenie" }
            ],
            "!go": {
              "taggedUnionType": true
            }
          },
          "disableSendResolved": {
            "description": "Disable notifications when alerts resolve themselves.",
            "type": "boolean",
            "default": false
          },
          "owners": {
            "description": "Do not use. When set, only receive alerts owned by the specified teams. Used by Sourcegraph internally.",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "default": {
          "level": "critical",
          "notifier": {
            "type": ""
          }
        }
      }
    },
    "observability.silenceAlerts": {
      "description": "Silence individual Sourcegraph alerts by identifier.",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "observability.logSlowSearches": {
      "description": "(debug) logs all search queries (issued by users, code intelligence, or API requests) slower than the specified number of milliseconds.",
      "type": "integer",
      "group": "Debug",
      "examples": [["10000"]]
    },
    "observability.logSlowGraphQLRequests": {
      "description": "(debug) logs all GraphQL requests slower than the specified number of milliseconds.",
      "type": "integer",
      "group": "Debug",
      "examples": [["10000"]]
    },
    "insights.historical.frames": {
      "description": "(debug) number of historical insights timeframes to populate",
      "type": "integer",
      "group": "Debug",
      "examples": [["6"]]
    },
    "insights.historical.frameLength": {
      "description": "(debug) duration of historical insights timeframes, one point per repository will be recorded in each timeframe.",
      "type": "string",
      "group": "Debug",
      "examples": ["30d"]
    },
    "insights.historical.speedFactor": {
      "description": "(debug) Speed factor for building historical insights data. A value like 1.5 indicates approximately to use 1.5x as much repo-updater and gitserver resources.",
      "!go": { "pointer": true },
      "type": "number",
      "group": "Debug",
      "examples": ["1.0"]
    },
    "insights.query.worker.concurrency": {
      "description": "Number of concurrent executions of a code insight query on a worker node",
      "type": "integer",
      "group": "CodeInsights",
      "default": 1,
      "examples": [10]
    },
    "insights.query.worker.rateLimit": {
      "description": "Maximum number of Code Insights queries initiated per second on a worker node.",
      "type": "number",
      "group": "CodeInsights",
      "default": 2,
      "examples": [10.0, 0.5],
      "!go": { "pointer": true }
    },
    "insights.compute.graphql": {
      "description": "DEPRECATED: Force GraphQL mode for insights compute searches. This will overwrite the default streaming behavior and force search clients to use the GraphQL API",
      "type": "boolean",
      "!go": { "pointer": true },
      "group": "CodeInsights",
      "default": false
    },
    "insights.search.graphql": {
      "description": "DEPRECATED: Force GraphQL mode for insights searches. This will overwrite the default streaming behavior and force search clients to use the GraphQL API",
      "type": "boolean",
      "!go": { "pointer": true },
      "group": "CodeInsights",
      "default": false
    },
    "insights.historical.worker.rateLimit": {
      "description": "Maximum number of historical Code Insights data frames that may be analyzed per second.",
      "type": "number",
      "group": "CodeInsights",
      "default": 10,
      "examples": [50.0, 0.5],
      "!go": { "pointer": true }
    },
    "insights.commit.indexer.interval": {
      "description": "The interval (in minutes) at which the insights commit indexer will check for new commits.",
      "type": "integer",
      "group": "CodeInsights",
      "default": 60,
      "examples": [120]
    },
    "insights.commit.indexer.windowDuration": {
      "description": "The number of days of commits the insights commit indexer will pull during each request (0 is no limit).",
      "type": "integer",
      "group": "CodeInsights",
      "default": 0,
      "examples": [30]
    },
    "insights.aggregations.bufferSize": {
      "description": "The size of the buffer for aggregations ran in-memory. A higher limit might strain memory for the frontend",
      "type": "integer",
      "group": "CodeInsights",
      "default": 500
    },
    "htmlHeadTop": {
      "description": "HTML to inject at the top of the `<head>` element on each page, for analytics scripts",
      "type": "string",
      "group": "Misc."
    },
    "htmlHeadBottom": {
      "description": "HTML to inject at the bottom of the `<head>` element on each page, for analytics scripts",
      "type": "string",
      "group": "Misc."
    },
    "htmlBodyTop": {
      "description": "HTML to inject at the top of the `<body>` element on each page, for analytics scripts",
      "type": "string",
      "group": "Misc."
    },
    "htmlBodyBottom": {
      "description": "HTML to inject at the bottom of the `<body>` element on each page, for analytics scripts",
      "type": "string",
      "group": "Misc."
    },
    "licenseKey": {
      "description": "The license key associated with a Sourcegraph product subscription, which is necessary to activate Sourcegraph Enterprise functionality. To obtain this value, contact Sourcegraph to purchase a subscription. To escape the value into a JSON string, you may want to use a tool like https://json-escape-text.now.sh.",
      "type": "string",
      "group": "Sourcegraph Enterprise license"
    },
    "gitHubApp": {
      "description": "The config options for Sourcegraph GitHub App.",
      "type": "object",
      "properties": {
        "slug": {
          "description": "The slug of the GitHub App for Sourcegraph.",
          "type": "string"
        },
        "appID": {
          "description": "The app ID of the GitHub App for Sourcegraph.",
          "type": "string"
        },
        "privateKey": {
          "description": "The base64-encoded private key of the GitHub App for Sourcegraph.",
          "type": "string"
        },
        "clientID": {
          "type": "string",
          "description": "The Client ID of the GitHub App for Sourcegraph, accessible from https://github.com/settings/apps ."
        },
        "clientSecret": {
          "type": "string",
          "description": "The Client Secret of the GitHub App for Sourcegraph, accessible from https://github.com/settings/apps ."
        }
      }
    },
    "dotcom": {
      "description": "Configuration options for Sourcegraph.com only.",
      "type": "object",
      "properties": {
        "slackLicenseExpirationWebhook": {
          "description": "Slack webhook for upcoming license expiration notifications.",
          "type": "string",
          "group": "Sourcegraph.com"
        },
        "srcCliVersionCache": {
          "description": "Configuration related to the src-cli version cache. This should only be used on sourcegraph.com.",
          "type": "object",
          "required": ["enabled", "github"],
          "group": "Sourcegraph.com",
          "properties": {
            "enabled": {
              "description": "Enables the src-cli version cache API endpoint.",
              "type": "boolean",
              "default": false
            },
            "github": {
              "description": "GitHub configuration, both for queries and receiving release webhooks.",
              "type": "object",
              "required": ["token", "webhookSecret"],
              "properties": {
                "repository": {
                  "description": "The repository to get the latest version of.",
                  "type": "object",
                  "properties": {
                    "owner": {
                      "description": "The repository namespace.",
                      "type": "string",
                      "default": "sourcegraph"
                    },
                    "name": {
                      "description": "The repository name.",
                      "type": "string",
                      "default": "src-cli"
                    }
                  }
                },
                "token": {
                  "description": "The access token to use when communicating with GitHub.",
                  "type": "string"
                },
                "uri": {
                  "description": "The URI of the GitHub instance.",
                  "type": "string",
                  "default": "https://github.com"
                },
                "webhookSecret": {
                  "description": "The release webhook secret.",
                  "type": "string"
                }
              }
            },
            "interval": {
              "description": "The interval between version checks, expressed as a string that can be parsed by Go's time.ParseDuration.",
              "type": "string",
              "default": "1h"
            }
          }
        }
      },
      "group": "Sourcegraph.com"
    },
    "auth.providers": {
      "description": "The authentication providers to use for identifying and signing in users. See instructions below for configuring SAML, OpenID Connect (including Google Workspace), and HTTP authentication proxies. Multiple authentication providers are supported (by specifying multiple elements in this array).",
      "type": "array",
      "items": {
        "required": ["type"],
        "properties": {
          "type": {
            "type": "string",
            "enum": ["builtin", "saml", "openidconnect", "http-header", "github", "gitlab"]
          }
        },
        "oneOf": [
          { "$ref": "#/definitions/BuiltinAuthProvider" },
          { "$ref": "#/definitions/SAMLAuthProvider" },
          { "$ref": "#/definitions/OpenIDConnectAuthProvider" },
          { "$ref": "#/definitions/HTTPHeaderAuthProvider" },
          { "$ref": "#/definitions/GitHubAuthProvider" },
          { "$ref": "#/definitions/GitLabAuthProvider" }
        ],
        "!go": {
          "taggedUnionType": true
        }
      },
      "group": "Authentication",
      "default": [{ "type": "builtin", "allowSignup": true }]
    },
    "auth.public": {
      "description": "WARNING: This option has been removed as of 3.8.",
      "type": "boolean",
      "default": false,
      "group": "Authentication"
    },
    "auth.sessionExpiry": {
      "type": "string",
      "description": "The duration of a user session, after which it expires and the user is required to re-authenticate. The default is 90 days. There is typically no need to set this, but some users may have specific internal security requirements.\n\nThe string format is that of the Duration type in the Go time package (https://golang.org/pkg/time/#ParseDuration). E.g., \"720h\", \"43200m\", \"2592000s\" all indicate a timespan of 30 days.\n\nNote: changing this field does not affect the expiration of existing sessions. If you would like to enforce this limit for existing sessions, you must log out currently signed-in users. You can force this by removing all keys beginning with \"session_\" from the Redis store:\n\n* For deployments using `sourcegraph/server`: `docker exec $CONTAINER_ID redis-cli --raw keys 'session_*' | xargs docker exec $CONTAINER_ID redis-cli del`\n* For cluster deployments: \n  ```\n  REDIS_POD=\"$(kubectl get pods -l app=redis-store -o jsonpath={.items[0].metadata.name})\";\n  kubectl exec \"$REDIS_POD\" -- redis-cli --raw keys 'session_*' | xargs kubectl exec \"$REDIS_POD\" -- redis-cli --raw del;\n  ```\n",
      "default": "2160h",
      "examples": ["168h"],
      "group": "Authentication"
    },
    "auth.enableUsernameChanges": {
      "description": "Enables users to change their username after account creation. Warning: setting this to be true has security implications if you have enabled (or will at any point in the future enable) repository permissions with an option that relies on username equivalency between Sourcegraph and an external service or authentication provider. Do NOT set this to true if you are using non-built-in authentication OR rely on username equivalency for repository permissions.",
      "type": "boolean",
      "default": false,
      "group": "Authentication"
    },
    "auth.minPasswordLength": {
      "description": "The minimum number of Unicode code points that a password must contain.",
      "type": "integer",
      "default": 12,
      "group": "Authentication"
    },
    "auth.passwordResetLinkExpiry": {
      "description": "The duration (in seconds) that a password reset link is considered valid.",
      "type": "integer",
      "default": 14400,
      "group": "Authentication"
    },
    "auth.lockout": {
      "description": "The config options for account lockout",
      "type": "object",
      "properties": {
        "failedAttemptThreshold": {
          "description": "The threshold of failed sign-in attempts in a consecutive period",
          "type": "integer",
          "default": 5
        },
        "lockoutPeriod": {
          "description": "The number of seconds for the lockout period",
          "type": "integer",
          "default": 1800
        },
        "consecutivePeriod": {
          "description": "The number of seconds to be considered as a consecutive period",
          "type": "integer",
          "default": 3600
        }
      },
      "group": "Authentication"
    },
    "auth.unlockAccountLinkSigningKey": {
      "description": "Base64-encoded HMAC signing key to sign the JWT token for account unlock URLs",
      "type": "string",
      "group": "Authentication"
    },
    "auth.unlockAccountLinkExpiry": {
      "description": "Validity expressed in minutes of the unlock account token",
      "type": "integer",
      "group": "Authentication",
      "default": 5
    },
    "update.channel": {
      "description": "The channel on which to automatically check for Sourcegraph updates.",
      "type": ["string"],
      "enum": ["release", "none"],
      "default": "release",
      "examples": ["none"],
      "group": "Misc."
    },
    "userRepos.maxPerSite": {
      "description": "The site wide maximum number of repos that can be added by non site admins",
      "type": "integer",
      "default": 200000,
      "group": "Misc."
    },
    "userRepos.maxPerUser": {
      "description": "The per user maximum number of repos that can be added by non site admins",
      "type": "integer",
      "default": 2000,
      "group": "Misc."
    },
    "productResearchPage.enabled": {
      "description": "Enables users access to the product research page in their settings.",
      "type": "boolean",
      "!go": { "pointer": true },
      "group": "Misc.",
      "default": true
    },
    "encryption.keys": {
      "description": "Configuration for encryption keys used to encrypt data at rest in the database.",
      "type": "object",
      "properties": {
        "enableCache": {
          "description": "enable LRU cache for decryption APIs",
          "type": "boolean",
          "default": false
        },
        "cacheSize": {
          "description": "number of values to keep in LRU cache",
          "type": "integer",
          "default": 2048
        },
        "batchChangesCredentialKey": {
          "$ref": "#/definitions/EncryptionKey"
        },
        "externalServiceKey": {
          "$ref": "#/definitions/EncryptionKey"
        },
        "userExternalAccountKey": {
          "$ref": "#/definitions/EncryptionKey"
        },
        "webhookLogKey": {
          "$ref": "#/definitions/EncryptionKey"
        }
      }
    },
    "api.ratelimit": {
      "description": "Configuration for API rate limiting",
      "type": "object",
      "required": ["enabled", "perUser", "perIP"],
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Whether API rate limiting is enabled"
        },
        "perUser": {
          "description": "Limit granted per user per hour",
          "type": "integer",
          "minimum": 1,
          "default": 1000000
        },
        "perIP": {
          "description": "Limit granted per IP per hour, only applied to anonymous users",
          "type": "integer",
          "minimum": 1,
          "default": 1000000
        },
        "overrides": {
          "description": "An array of rate limit overrides",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "key": {
                "description": "The key that we want to override for example a username",
                "type": "string",
                "minLength": 1
              },
              "limit": {
                "description": "The limit per hour, 'unlimited' or 'blocked'",
                "oneOf": [
                  { "type": "string", "const": "unlimited" },
                  { "type": "string", "const": "blocked" },
                  { "type": "integer", "minimum": 1 }
                ]
              }
            }
          }
        }
      }
    },
    "webhook.logging": {
      "description": "Configuration for logging incoming webhooks.",
      "type": "object",
      "properties": {
        "enabled": {
          "description": "Whether incoming webhooks are logged. If omitted, logging is enabled on sites without encryption. If one or more encryption keys are present, this setting must be enabled manually; as webhooks may contain sensitive data, admins of encrypted sites may want to enable webhook encryption via encryption.keys.webhookLogKey.",
          "type": "boolean",
          "!go": { "pointer": true }
        },
        "retention": {
          "description": "How long incoming webhooks are retained. The string format is that of the Duration type in the Go time package (https://golang.org/pkg/time/#ParseDuration). Values lower than 1 hour will be treated as 1 hour. By default, this is \"72h\", or three days.",
          "type": "string",
          "default": "72h"
        }
      }
    },
    "organizationInvitations": {
      "description": "Configuration for organization invitations.",
      "type": "object",
      "required": ["signingKey"],
      "properties": {
        "expiryTime": {
          "description": "Time before the invitation expires, in hours (experimental, not enforced at the moment).",
          "type": "integer",
          "default": 48
        },
        "signingKey": {
          "description": "Base64 encoded HMAC Signing key to sign a JWT token, which is attached to each invitation URL.\nMore documentation here: https://pkg.go.dev/github.com/golang-jwt/jwt#SigningMethodHMAC \n\nIf not provided, will fall back to legacy invitation to an organization.\n\nThe legacy invitation will be deprecated in the future and creating an organization invitation will fail with an error if this setting is not present.",
          "type": "string"
        }
      }
    }
  },
  "definitions": {
    "BrandAssets": {
      "type": "object",
      "properties": {
        "logo": {
          "description": "The URL to the image used on the homepage. This will replace the Sourcegraph logo on the homepage. Maximum width: 320px. We recommend using the following file formats: SVG, PNG",
          "type": "string",
          "format": "uri"
        },
        "symbol": {
          "description": "The URL to the symbol used as the search icon. Recommended size: 24x24px. We recommend using the following file formats: SVG, PNG, ICO",
          "type": "string",
          "format": "uri"
        }
      }
    },
    "BuiltinAuthProvider": {
      "description": "Configures the builtin username-password authentication provider.",
      "type": "object",
      "additionalProperties": false,
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "const": "builtin"
        },
        "allowSignup": {
          "description": "Allows new visitors to sign up for accounts. The sign-up page will be enabled and accessible to all visitors.\n\nSECURITY: If the site has no users (i.e., during initial setup), it will always allow the first user to sign up and become site admin **without any approval** (first user to sign up becomes the admin).",
          "type": "boolean",
          "default": false
        }
      }
    },
    "OpenIDConnectAuthProvider": {
      "description": "Configures the OpenID Connect authentication provider for SSO.",
      "type": "object",
      "additionalProperties": false,
      "required": ["type", "issuer", "clientID", "clientSecret"],
      "properties": {
        "type": {
          "type": "string",
          "const": "openidconnect"
        },
        "displayName": { "$ref": "#/definitions/AuthProviderCommon/properties/displayName" },
        "configID": {
          "description": "An identifier that can be used to reference this authentication provider in other parts of the config. For example, in configuration for a code host, you may want to designate this authentication provider as the identity provider for the code host.",
          "type": "string"
        },
        "issuer": {
          "description": "The URL of the OpenID Connect issuer.\n\nFor Google Apps: https://accounts.google.com",
          "type": "string",
          "format": "uri",
          "pattern": "^https?://"
        },
        "clientID": {
          "description": "The client ID for the OpenID Connect client for this site.\n\nFor Google Apps: obtain this value from the API console (https://console.developers.google.com), as described at https://developers.google.com/identity/protocols/OpenIDConnect#getcredentials",
          "type": "string",
          "pattern": "^[^<]"
        },
        "clientSecret": {
          "description": "The client secret for the OpenID Connect client for this site.\n\nFor Google Apps: obtain this value from the API console (https://console.developers.google.com), as described at https://developers.google.com/identity/protocols/OpenIDConnect#getcredentials",
          "type": "string",
          "pattern": "^[^<]"
        },
        "requireEmailDomain": {
          "description": "Only allow users to authenticate if their email domain is equal to this value (example: mycompany.com). Do not include a leading \"@\". If not set, all users on this OpenID Connect provider can authenticate to Sourcegraph.",
          "type": "string",
          "pattern": "^[^<@]"
        },
        "allowSignup": {
          "description": "Allows new visitors to sign up for accounts via OpenID Connect authentication. If false, users signing in via OpenID Connect must have an existing Sourcegraph account, which will be linked to their OpenID Connect identity after sign-in.",
          "type": "boolean",
          "!go": { "pointer": true }
        }
      }
    },
    "SAMLAuthProvider": {
      "description": "Configures the SAML authentication provider for SSO.\n\nNote: if you are using IdP-initiated login, you must have *at most one* SAMLAuthProvider in the `auth.providers` array.",
      "type": "object",
      "additionalProperties": false,
      "required": ["type"],
      "dependencies": {
        "serviceProviderCertificate": ["serviceProviderPrivateKey"],
        "serviceProviderPrivateKey": ["serviceProviderCertificate"],
        "signRequests": ["serviceProviderCertificate", "serviceProviderPrivateKey"]
      },
      "properties": {
        "type": {
          "type": "string",
          "const": "saml"
        },
        "configID": {
          "description": "An identifier that can be used to reference this authentication provider in other parts of the config. For example, in configuration for a code host, you may want to designate this authentication provider as the identity provider for the code host.",
          "type": "string"
        },
        "displayName": { "$ref": "#/definitions/AuthProviderCommon/properties/displayName" },
        "serviceProviderIssuer": {
          "description": "The SAML Service Provider name, used to identify this Service Provider. This is required if the \"externalURL\" field is not set (as the SAML metadata endpoint is computed as \"<externalURL>.auth/saml/metadata\"), or when using multiple SAML authentication providers.",
          "type": "string"
        },
        "identityProviderMetadataURL": {
          "description": "The SAML Identity Provider metadata URL (for dynamic configuration of the SAML Service Provider).",
          "type": "string",
          "format": "uri",
          "pattern": "^https?://"
        },
        "identityProviderMetadata": {
          "description": "The SAML Identity Provider metadata XML contents (for static configuration of the SAML Service Provider). The value of this field should be an XML document whose root element is `<EntityDescriptor>` or `<EntityDescriptors>`. To escape the value into a JSON string, you may want to use a tool like https://json-escape-text.now.sh.",
          "type": "string"
        },
        "serviceProviderCertificate": {
          "description": "The SAML Service Provider certificate in X.509 encoding (begins with \"-----BEGIN CERTIFICATE-----\"). This certificate is used by the Identity Provider to validate the Service Provider's AuthnRequests and LogoutRequests. It corresponds to the Service Provider's private key (`serviceProviderPrivateKey`). To escape the value into a JSON string, you may want to use a tool like https://json-escape-text.now.sh.",
          "type": "string",
          "$comment": "The pattern matches either X.509 encoding or an env var.",
          "pattern": "^(-----BEGIN CERTIFICATE-----\n|\\$)",
          "minLength": 1
        },
        "serviceProviderPrivateKey": {
          "description": "The SAML Service Provider private key in PKCS#8 encoding (begins with \"-----BEGIN PRIVATE KEY-----\"). This private key is used to sign AuthnRequests and LogoutRequests. It corresponds to the Service Provider's certificate (`serviceProviderCertificate`). To escape the value into a JSON string, you may want to use a tool like https://json-escape-text.now.sh.",
          "type": "string",
          "$comment": "The pattern matches either PKCS#8 encoding or an env var.",
          "pattern": "^(-----BEGIN PRIVATE KEY-----\n|\\$)",
          "minLength": 1
        },
        "nameIDFormat": {
          "description": "The SAML NameID format to use when performing user authentication.",
          "type": "string",
          "pattern": "^urn:",
          "default": "urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",
          "examples": [
            "urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress",
            "urn:oasis:names:tc:SAML:1.1:nameid-format:persistent",
            "urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",
            "urn:oasis:names:tc:SAML:2.0:nameid-format:emailAddress",
            "urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",
            "urn:oasis:names:tc:SAML:2.0:nameid-format:transient",
            "urn:oasis:names:tc:SAML:2.0:nameid-format:unspecified"
          ]
        },
        "signRequests": {
          "description": "Sign AuthnRequests and LogoutRequests sent to the Identity Provider using the Service Provider's private key (`serviceProviderPrivateKey`). It defaults to true if the `serviceProviderPrivateKey` and `serviceProviderCertificate` are set, and false otherwise.",
          "type": "boolean",
          "!go": { "pointer": true }
        },
        "insecureSkipAssertionSignatureValidation": {
          "description": "Whether the Service Provider should (insecurely) accept assertions from the Identity Provider without a valid signature.",
          "type": "boolean",
          "default": false
        },
        "allowSignup": {
          "description": "Allows new visitors to sign up for accounts via SAML authentication. If false, users signing in via SAML must have an existing Sourcegraph account, which will be linked to their SAML identity after sign-in.",
          "type": "boolean",
          "!go": { "pointer": true }
        },
        "allowGroups": {
          "description": "Restrict login to members of these groups",
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1
          }
        },
        "groupsAttributeName": {
          "description": "Name of the SAML assertion attribute that holds group membership for allowGroups setting",
          "type": "string",
          "default": "groups"
        }
      }
    },
    "HTTPHeaderAuthProvider": {
      "description": "Configures the HTTP header authentication provider (which authenticates users by consulting an HTTP request header set by an authentication proxy such as https://github.com/bitly/oauth2_proxy).",
      "type": "object",
      "additionalProperties": false,
      "required": ["type", "usernameHeader"],
      "properties": {
        "type": {
          "type": "string",
          "const": "http-header"
        },
        "usernameHeader": {
          "description": "The name (case-insensitive) of an HTTP header whose value is taken to be the username of the client requesting the page. Set this value when using an HTTP proxy that authenticates requests, and you don't want the extra configurability of the other authentication methods.",
          "type": "string",
          "examples": ["X-Forwarded-User"]
        },
        "stripUsernameHeaderPrefix": {
          "description": "The prefix that precedes the username portion of the HTTP header specified in `usernameHeader`. If specified, the prefix will be stripped from the header value and the remainder will be used as the username. For example, if using Google Identity-Aware Proxy (IAP) with Google Sign-In, set this value to `accounts.google.com:`.",
          "type": "string",
          "examples": ["accounts.google.com:"]
        },
        "emailHeader": {
          "description": "The name (case-insensitive) of an HTTP header whose value is taken to be the email of the client requesting the page. Set this value when using an HTTP proxy that authenticates requests, and you don't want the extra configurability of the other authentication methods.",
          "type": "string",
          "examples": ["X-App-Email"]
        }
      }
    },
    "GitHubAuthProvider": {
      "description": "Configures the GitHub (or GitHub Enterprise) OAuth authentication provider for SSO. In addition to specifying this configuration object, you must also create a OAuth App on your GitHub instance: https://developer.github.com/apps/building-oauth-apps/creating-an-oauth-app/. When a user signs into Sourcegraph or links their GitHub account to their existing Sourcegraph account, GitHub will prompt the user for the repo scope.",
      "type": "object",
      "additionalProperties": false,
      "required": ["type", "clientID", "clientSecret"],
      "properties": {
        "type": {
          "type": "string",
          "const": "github"
        },
        "url": {
          "type": "string",
          "description": "URL of the GitHub instance, such as https://github.com or https://github-enterprise.example.com.",
          "default": "https://github.com/"
        },
        "clientID": {
          "type": "string",
          "description": "The Client ID of the GitHub OAuth app, accessible from https://github.com/settings/developers (or the same path on GitHub Enterprise)."
        },
        "clientSecret": {
          "type": "string",
          "description": "The Client Secret of the GitHub OAuth app, accessible from https://github.com/settings/developers (or the same path on GitHub Enterprise)."
        },
        "displayName": { "$ref": "#/definitions/AuthProviderCommon/properties/displayName" },
        "allowSignup": {
          "description": "Allows new visitors to sign up for accounts via GitHub authentication. If false, users signing in via GitHub must have an existing Sourcegraph account, which will be linked to their GitHub identity after sign-in.",
          "default": false,
          "type": "boolean"
        },
        "allowOrgs": {
          "description": "Restricts new logins and signups (if allowSignup is true) to members of these GitHub organizations. Existing sessions won't be invalidated. Leave empty or unset for no org restrictions.",
          "default": [],
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1
          }
        },
        "allowOrgsMap": {
          "description": "Restricts new logins and signups (if allowSignup is true) to members of GitHub teams. Each list of teams should have their Github org name as a key. Subteams inheritance is not supported, therefore only members of the listed teams will be granted access. Existing sessions won't be invalidated. Leave empty or unset for no team restrictions.",
          "default": {},
          "type": "object",
          "additionalProperties": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "examples": [
            {
              "orgName": ["team1"],
              "anotherOrgName": ["team2", "team3"]
            }
          ]
        },
        "allowGroupsPermissionsSync": {
          "description": "Experimental: Allows sync of GitHub teams and organizations permissions across all external services associated with this provider to allow enabling of [repository permissions caching](https://docs.sourcegraph.com/admin/repo/permissions#permissions-caching).",
          "default": false,
          "type": "boolean"
        },
        "hidden": {
          "description": "Hides the configured auth provider from regular use through our web interface by omitting it from the JSContext, useful for experimental auth setups.",
          "default": false,
          "type": "boolean"
        }
      }
    },
    "GitLabAuthProvider": {
      "description": "Configures the GitLab OAuth authentication provider for SSO. In addition to specifying this configuration object, you must also create a OAuth App on your GitLab instance: https://docs.gitlab.com/ee/integration/oauth_provider.html. The application should have `api` and `read_user` scopes and the callback URL set to the concatenation of your Sourcegraph instance URL and \"/.auth/gitlab/callback\".",
      "type": "object",
      "additionalProperties": false,
      "required": ["type", "clientID", "clientSecret"],
      "properties": {
        "type": {
          "type": "string",
          "const": "gitlab"
        },
        "url": {
          "type": "string",
          "description": "URL of the GitLab instance, such as https://gitlab.com or https://gitlab.example.com.",
          "default": "https://gitlab.com/"
        },
        "clientID": {
          "type": "string",
          "description": "The Client ID of the GitLab OAuth app, accessible from https://gitlab.com/oauth/applications (or the same path on your private GitLab instance)."
        },
        "clientSecret": {
          "type": "string",
          "description": "The Client Secret of the GitLab OAuth app, accessible from https://gitlab.com/oauth/applications (or the same path on your private GitLab instance)."
        },
        "displayName": { "$ref": "#/definitions/AuthProviderCommon/properties/displayName" },
        "apiScope": {
          "type": "string",
          "description": "The OAuth API scope that should be used",
          "default": "api",
          "enum": ["api", "read_api"]
        },
        "allowSignup": {
          "description": "Allows new visitors to sign up for accounts via GitLab authentication. If false, users signing in via GitLab must have an existing Sourcegraph account, which will be linked to their GitLab identity after sign-in.",
          "default": true,
          "type": "boolean",
          "!go": { "pointer": true }
        },
        "allowGroups": {
          "description": "Restricts new logins and signups (if allowSignup is true) to members of these GitLab groups. Existing sessions won't be invalidated. Make sure to inform the full path for groups or subgroups instead of their names. Leave empty or unset for no group restrictions.",
          "default": [],
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1
          },
          "examples": [["group", "group/subgroup", "group/subgroup/subgroup"]]
        },
        "tokenRefreshWindowMinutes": {
          "description": "Time in minutes before token expiry when we should attempt to refresh it",
          "default": 10,
          "type": "integer"
        }
      }
    },
    "AuthProviderCommon": {
      "$comment": "This schema is not used directly. The *AuthProvider schemas refer to its properties directly.",
      "description": "Common properties for authentication providers.",
      "type": "object",
      "properties": {
        "displayName": {
          "description": "The name to use when displaying this authentication provider in the UI. Defaults to an auto-generated name with the type of authentication provider and other relevant identifiers (such as a hostname).",
          "type": "string"
        }
      }
    },
    "NotifierSlack": {
      "description": "Slack notifier",
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "const": "slack"
        },
        "url": {
          "description": "Slack incoming webhook URL.",
          "type": "string"
        },
        "username": {
          "description": "Set the username for the bots message.",
          "type": "string"
        },
        "recipient": {
          "description": "Allows you to override the Slack recipient. You must either provide a channel Slack ID, a user Slack ID, a username reference (@<user>, all lowercase, no whitespace), or a channel reference (#<channel>, all lowercase, no whitespace).",
          "type": "string"
        },
        "icon_emoji": {
          "description": "Provide an emoji to use as the icon for the bots message. Ex :smile:",
          "type": "string"
        },
        "icon_url": {
          "description": "Provide a URL to an image to use as the icon for the bots message.",
          "type": "string"
        }
      }
    },
    "NotifierPagerduty": {
      "description": "PagerDuty notifier",
      "type": "object",
      "required": ["type", "integrationKey"],
      "properties": {
        "type": {
          "type": "string",
          "const": "pagerduty"
        },
        "integrationKey": {
          "description": "Integration key for the PagerDuty Events API v2 - see https://developer.pagerduty.com/docs/events-api-v2/overview",
          "type": "string"
        },
        "severity": {
          "description": "Severity level for PagerDuty alert",
          "type": "string"
        },
        "apiUrl": { "type": "string" }
      }
    },
    "NotifierWebhook": {
      "description": "Webhook notifier",
      "type": "object",
      "required": ["type", "url"],
      "properties": {
        "type": {
          "type": "string",
          "const": "webhook"
        },
        "url": { "type": "string" },
        "username": { "type": "string" },
        "password": { "type": "string" },
        "bearerToken": { "type": "string" }
      }
    },
    "NotifierEmail": {
      "description": "Email notifier",
      "type": "object",
      "required": ["type", "address"],
      "properties": {
        "type": {
          "type": "string",
          "const": "email"
        },
        "address": {
          "description": "Address to send email to",
          "type": "string"
        }
      }
    },
    "NotifierOpsGenie": {
      "description": "OpsGenie notifier",
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "const": "opsgenie"
        },
        "apiKey": { "type": "string" },
        "apiUrl": { "type": "string" },
        "tags": {
          "description": "Comma separated list of tags attached to the notifications - or a Go template that produces such a list. Sourcegraph provides some default ones if this value isn't specified.",
          "type": "string"
        },
        "priority": {
          "description": "Defines the importance of an alert. Allowed values are P1, P2, P3, P4, P5 - or a Go template that resolves to one of those values. By default, Sourcegraph will fill this in for you if a value isn't specified here.",
          "type": "string"
        },
        "responders": {
          "type": "array",
          "description": "List of responders responsible for notifications.",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": ["team", "user", "escalation", "schedule"]
              },
              "id": { "type": "string" },
              "name": { "type": "string" },
              "username": { "type": "string" }
            },
            "oneOf": [
              { "required": ["type", "id"] },
              { "required": ["type", "name"] },
              { "required": ["type", "username"] }
            ]
          }
        }
      }
    },
    "EncryptionKey": {
      "description": "Config for a key",
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["cloudkms", "awskms", "mounted", "noop"]
        }
      },
      "oneOf": [
        {
          "$ref": "#/definitions/CloudKMSEncryptionKey"
        },
        {
          "$ref": "#/definitions/AWSKMSEncryptionKey"
        },
        {
          "$ref": "#/definitions/MountedEncryptionKey"
        },
        {
          "$ref": "#/definitions/NoOpEncryptionKey"
        }
      ],
      "!go": {
        "taggedUnionType": true
      }
    },
    "CloudKMSEncryptionKey": {
      "description": "Google Cloud KMS Encryption Key, used to encrypt data in Google Cloud environments",
      "type": "object",
      "required": ["type", "keyname"],
      "properties": {
        "type": {
          "type": "string",
          "const": "cloudkms"
        },
        "keyname": {
          "type": "string"
        },
        "credentialsFile": {
          "type": "string"
        }
      }
    },
    "AWSKMSEncryptionKey": {
      "description": "AWS KMS Encryption Key, used to encrypt data in AWS environments",
      "type": "object",
      "required": ["type", "keyId"],
      "properties": {
        "type": {
          "type": "string",
          "const": "awskms"
        },
        "keyId": {
          "type": "string"
        },
        "region": {
          "type": "string"
        },
        "credentialsFile": {
          "type": "string"
        }
      }
    },
    "MountedEncryptionKey": {
      "description": "This encryption key is mounted from a given file path or an environment variable.",
      "type": "object",
      "required": ["type", "keyname"],
      "properties": {
        "type": {
          "type": "string",
          "const": "mounted"
        },
        "keyname": {
          "type": "string"
        },
        "filepath": {
          "type": "string"
        },
        "envVarName": {
          "type": "string"
        },
        "version": {
          "type": "string"
        }
      }
    },
    "NoOpEncryptionKey": {
      "description": "This encryption key is a no op, leaving your data in plaintext (not recommended).",
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "const": "noop"
        }
      }
    }
  }
}
